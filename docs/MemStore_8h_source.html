<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Squid Web Cache: squid/src/MemStore.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Squid Web Cache<span id="projectnumber">&#160;v8/master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('MemStore_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">MemStore.h</div></div>
</div><!--header-->
<div class="contents">
<a href="MemStore_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"> * Copyright (C) 1996-2025 The Squid Software Foundation and contributors</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> *</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"> * Squid software is distributed under GPLv2+ license and includes</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"> * contributions from numerous individuals and organizations.</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"> * Please see the COPYING and CONTRIBUTORS files for details.</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment"> */</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#ifndef SQUID_SRC_MEMSTORE_H</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#define SQUID_SRC_MEMSTORE_H</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span> </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &quot;<a class="code" href="Page_8h.html">ipc/mem/Page.h</a>&quot;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &quot;<a class="code" href="PageStack_8h.html">ipc/mem/PageStack.h</a>&quot;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="StoreMap_8h.html">ipc/StoreMap.h</a>&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="Store_8h.html">Store.h</a>&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="Controlled_8h.html">store/Controlled.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span> </div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment">// StoreEntry restoration info not already stored by Ipc::StoreMap</span></div>
<div class="foldopen" id="foldopen00019" data-start="{" data-end="};">
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno"><a class="line" href="structMemStoreMapExtraItem.html">   19</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structMemStoreMapExtraItem.html">MemStoreMapExtraItem</a> {</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno"><a class="line" href="structMemStoreMapExtraItem.html#add39697d8ea394a47ad6118e313304a9">   20</a></span>    <a class="code hl_class" href="classIpc_1_1Mem_1_1PageId.html">Ipc::Mem::PageId</a> <a class="code hl_variable" href="structMemStoreMapExtraItem.html#add39697d8ea394a47ad6118e313304a9">page</a>; </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>};</div>
</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno"><a class="line" href="MemStore_8h.html#aaa5843c89cde10f0ca8fcca25593c13e">   22</a></span><span class="keyword">typedef</span> <a class="code hl_class" href="classIpc_1_1StoreMapItems.html">Ipc::StoreMapItems&lt;MemStoreMapExtraItem&gt;</a> <a class="code hl_typedef" href="MemStore_8h.html#aaa5843c89cde10f0ca8fcca25593c13e">MemStoreMapExtras</a>;</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno"><a class="line" href="MemStore_8h.html#acfc62e31321821e7833870b44a9866f8">   23</a></span><span class="keyword">typedef</span> <a class="code hl_class" href="classIpc_1_1StoreMap.html">Ipc::StoreMap</a> <a class="code hl_typedef" href="MemStore_8h.html#acfc62e31321821e7833870b44a9866f8">MemStoreMap</a>;</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="keyword">class </span><a class="code hl_class" href="classShmWriter.html">ShmWriter</a>;</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span> </div>
<div class="foldopen" id="foldopen00029" data-start="{" data-end="};">
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno"><a class="line" href="classMemStore.html">   29</a></span><span class="keyword">class </span><a class="code hl_class" href="classMemStore.html">MemStore</a>: <span class="keyword">public</span> <a class="code hl_class" href="classStore_1_1Controlled.html">Store::Controlled</a>, <span class="keyword">public</span> <a class="code hl_class" href="classIpc_1_1StoreMapCleaner.html">Ipc::StoreMapCleaner</a></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>{</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>    <a class="code hl_function" href="classMemStore.html#a4cd09bb74153155b3fc7f16e56959a81">MemStore</a>();</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    <a class="code hl_function" href="classMemStore.html#addfec880935b0e198b6e8f98f25fc01a">~MemStore</a>() <span class="keyword">override</span>;</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno"><a class="line" href="classMemStore.html#aa6f556cb0588d4307e1d115d7ef8daee">   36</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classMemStore.html#aa6f556cb0588d4307e1d115d7ef8daee">keepInLocalMemory</a>(<span class="keyword">const</span> <a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;e) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#adffb727d4a8888640cd7fc5fe0e75387">write</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;e);</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#a74c94a59b97017264b37acef0873c1f1">completeWriting</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;e);</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#a2f71b0551e573458d5d2d69ef7e7267d">disconnect</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;e);</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    <span class="comment">/* Storage API */</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="classMemStore.html#affbcceec8059e5e5502e697b969eb5b2">   48</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#affbcceec8059e5e5502e697b969eb5b2">create</a>()<span class="keyword"> override </span>{}</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#abb7a39ec7361cfbfe8ce951c180fef3a">init</a>() <span class="keyword">override</span>;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    <a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> *<a class="code hl_function" href="classMemStore.html#aa7e7ea15c585078eaa9201886e5cd07a">get</a>(<span class="keyword">const</span> <a class="code hl_typedef" href="store_2forward_8h.html#ab1424e1b13666cc28f4c5cb05f8c8305">cache_key</a> *) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    uint64_t <a class="code hl_function" href="classMemStore.html#a9fa77f4d33bd5ed3a45bcce12bcec202">maxSize</a>() <span class="keyword">const override</span>;</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    uint64_t <a class="code hl_function" href="classMemStore.html#a322d821eb0727d38d5713fbd86933bae">minSize</a>() <span class="keyword">const override</span>;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    uint64_t <a class="code hl_function" href="classMemStore.html#aeea87a7c519b9a2b75b0032f2a9823b8">currentSize</a>() <span class="keyword">const override</span>;</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    uint64_t <a class="code hl_function" href="classMemStore.html#a1b54c0c658c135179677fcfdf946c5b8">currentCount</a>() <span class="keyword">const override</span>;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    int64_t <a class="code hl_function" href="classMemStore.html#aa8db9e6a98fc5ba7c0c0bfe81c134a48">maxObjectSize</a>() <span class="keyword">const override</span>;</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#afbbdd98f5cc55093c2c7c7e035626765">getStats</a>(<a class="code hl_class" href="classStoreInfoStats.html">StoreInfoStats</a> &amp;stats) <span class="keyword">const override</span>;</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#a9419b9bfcd69fc8542f708a13295ff74">stat</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;e) <span class="keyword">const override</span>;</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#acd4c9281b1261e2f02e48d27a7324529">reference</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;e) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classMemStore.html#adde9a8fd40383d29423a86b96d97b97c">dereference</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;e) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#a166fe5bf3514c3511968b310d6c34f4d">updateHeaders</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> *e) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#af5cfd7812cfd6f492a6e9aeeecc07354">maintain</a>() <span class="keyword">override</span>;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classMemStore.html#a29e1ae9aef010b908dd54fdb73c1de1a">anchorToCache</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classMemStore.html#a055a2e9766291392f7376ba57a14368e">updateAnchored</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#a63941b32a1ba5f969bc479423437efd9">evictCached</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#acbab5d7bac460d85f98bbf0531acfb60">evictIfFound</a>(<span class="keyword">const</span> <a class="code hl_typedef" href="store_2forward_8h.html#ab1424e1b13666cc28f4c5cb05f8c8305">cache_key</a> *) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="classMemStore.html#acf842df3b35a7c6a710cbbc50ca2a3d5">   68</a></span>    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="classMemStore.html#acf842df3b35a7c6a710cbbc50ca2a3d5">Enabled</a>() { <span class="keywordflow">return</span> <a class="code hl_function" href="classMemStore.html#ab21e2746e3e1971628816fd78fc10540">EntryLimit</a>() &gt; 0; }</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <span class="keyword">static</span> int64_t <a class="code hl_function" href="classMemStore.html#ab21e2746e3e1971628816fd78fc10540">EntryLimit</a>();</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="classMemStore.html#ad9c18a888d40a85a127b705090cbe86c">Requested</a>();</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span> </div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="keyword">protected</span>:</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno"><a class="line" href="classMemStore.html#abf2884e7eb9a4317414aa11b20b2c050">   75</a></span>    <span class="keyword">friend</span> <a class="code hl_variable" href="classMemStore.html#abf2884e7eb9a4317414aa11b20b2c050">ShmWriter</a>;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classMemStore.html#a377c041982215cf33777cfaa7d69e69d">shouldCache</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;e) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classMemStore.html#af81030d4ddf06cc2a87eb6d1b5f87146">startCaching</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;e);</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span> </div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#aa88e3b04036dd563a62a7257fa953f6f">copyToShm</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;e);</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#a2c9191e61faacd84aee7f1a4252ebef9">copyToShmSlice</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;e, <a class="code hl_class" href="classIpc_1_1StoreMapAnchor.html">Ipc::StoreMapAnchor</a> &amp;anchor, <a class="code hl_class" href="classIpc_1_1StoreMapSlice.html">Ipc::StoreMap::Slice</a> &amp;slice);</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classMemStore.html#add7c8be9b87d85109662e51383a74040">copyFromShm</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;e, <span class="keyword">const</span> <a class="code hl_typedef" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a> index, <span class="keyword">const</span> <a class="code hl_class" href="classIpc_1_1StoreMapAnchor.html">Ipc::StoreMapAnchor</a> &amp;anchor);</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#a650c6af83323f0fb4606ed0b7393d1cd">copyFromShmSlice</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;, <span class="keyword">const</span> <a class="code hl_class" href="classStoreIOBuffer.html">StoreIOBuffer</a> &amp;);</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span> </div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#ad85a1109b92079224fb13a3f60e12ed9">updateHeadersOrThrow</a>(<a class="code hl_class" href="classIpc_1_1StoreMapUpdate.html">Ipc::StoreMapUpdate</a> &amp;update);</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#a14087d28cd0e599dff500a77534078c5">anchorEntry</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;e, <span class="keyword">const</span> <a class="code hl_typedef" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a> index, <span class="keyword">const</span> <a class="code hl_class" href="classIpc_1_1StoreMapAnchor.html">Ipc::StoreMapAnchor</a> &amp;anchor);</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classMemStore.html#a29e465191ed851119cb4770665cbeeb6">updateAnchoredWith</a>(<a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;, <span class="keyword">const</span> <a class="code hl_typedef" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a>, <span class="keyword">const</span> <a class="code hl_class" href="classIpc_1_1StoreMapAnchor.html">Ipc::StoreMapAnchor</a> &amp;);</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    <a class="code hl_class" href="classIpc_1_1Mem_1_1PageId.html">Ipc::Mem::PageId</a> <a class="code hl_function" href="classMemStore.html#a1ee0fa1d52e63ca55a1fefd15cd24176">pageForSlice</a>(<a class="code hl_typedef" href="namespaceIpc.html#aba4cfbbff5c598509762a9c46e755a76">Ipc::StoreMapSliceId</a> sliceId);</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <a class="code hl_class" href="classIpc_1_1StoreMapSlice.html">Ipc::StoreMap::Slice</a> &amp;<a class="code hl_function" href="classMemStore.html#aa9b755b5a7f41e3a4780d93178c91a0c">nextAppendableSlice</a>(<span class="keyword">const</span> <a class="code hl_typedef" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a> entryIndex, <a class="code hl_typedef" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a> &amp;sliceOffset);</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <a class="code hl_typedef" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a> <a class="code hl_function" href="classMemStore.html#ab4e52156ebc0d9999f2f747cdf7fbacb">reserveSapForWriting</a>(<a class="code hl_class" href="classIpc_1_1Mem_1_1PageId.html">Ipc::Mem::PageId</a> &amp;page);</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span> </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    <span class="comment">// Ipc::StoreMapCleaner API</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classMemStore.html#af861c6fcf103e39a4452f55b428d99ab">noteFreeMapSlice</a>(<span class="keyword">const</span> <a class="code hl_typedef" href="namespaceIpc.html#aba4cfbbff5c598509762a9c46e755a76">Ipc::StoreMapSliceId</a> sliceId) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    <span class="comment">// TODO: move freeSlots into map</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno"><a class="line" href="classMemStore.html#a6d2730835af2d42b262d367b352984b0">   99</a></span>    <a class="code hl_class" href="classIpc_1_1Mem_1_1Pointer.html">Ipc::Mem::Pointer&lt;Ipc::Mem::PageStack&gt;</a> <a class="code hl_variable" href="classMemStore.html#a6d2730835af2d42b262d367b352984b0">freeSlots</a>; </div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno"><a class="line" href="classMemStore.html#afb2e3f2b8bc24ab42b1285e1a06ae837">  100</a></span>    <a class="code hl_class" href="classIpc_1_1StoreMap.html">MemStoreMap</a> *<a class="code hl_variable" href="classMemStore.html#afb2e3f2b8bc24ab42b1285e1a06ae837">map</a>; </div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno"><a class="line" href="classMemStore.html#a9c3f0da19e4b33b1fdfa7f367816564b">  102</a></span>    <span class="keyword">typedef</span> <a class="code hl_class" href="classIpc_1_1StoreMapItems.html">MemStoreMapExtras</a> <a class="code hl_typedef" href="classMemStore.html#a9c3f0da19e4b33b1fdfa7f367816564b">Extras</a>;</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno"><a class="line" href="classMemStore.html#a1bf75cfa4148750ae439746afd08a419">  103</a></span>    <a class="code hl_class" href="classIpc_1_1Mem_1_1Pointer.html">Ipc::Mem::Pointer&lt;Extras&gt;</a> <a class="code hl_variable" href="classMemStore.html#a1bf75cfa4148750ae439746afd08a419">extras</a>; </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno"><a class="line" href="classMemStore.html#a1a459a0f0216f3652276a190330ede9f">  106</a></span>    <a class="code hl_typedef" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a> <a class="code hl_variable" href="classMemStore.html#a1a459a0f0216f3652276a190330ede9f">lastWritingSlice</a>;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="foldopen" id="foldopen00109" data-start="{" data-end="};">
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno"><a class="line" href="classMemStore_1_1SlotAndPage.html">  109</a></span>    <span class="keyword">class </span><a class="code hl_class" href="classMemStore_1_1SlotAndPage.html">SlotAndPage</a></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    {</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno"><a class="line" href="classMemStore_1_1SlotAndPage.html#acc369f9a917adfdaa53cd575250bdbfc">  112</a></span>        <a class="code hl_function" href="classMemStore_1_1SlotAndPage.html#acc369f9a917adfdaa53cd575250bdbfc">SlotAndPage</a>(): <a class="code hl_variable" href="classMemStore_1_1SlotAndPage.html#a0d16ea06cc8dd5e41dcc944dea6822f9">slot</a>(nullptr), <a class="code hl_variable" href="classMemStore_1_1SlotAndPage.html#adc76c0316fcbd504a371789e026b931c">page</a>(nullptr) {}</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno"><a class="line" href="classMemStore_1_1SlotAndPage.html#afb42923a9438f1ae11dbb3d9dfc25d2f">  113</a></span>        <span class="keywordtype">bool</span> <a class="code hl_function" href="classMemStore_1_1SlotAndPage.html#afb42923a9438f1ae11dbb3d9dfc25d2f">operator !</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !<a class="code hl_variable" href="classMemStore_1_1SlotAndPage.html#a0d16ea06cc8dd5e41dcc944dea6822f9">slot</a> &amp;&amp; !<a class="code hl_variable" href="classMemStore_1_1SlotAndPage.html#adc76c0316fcbd504a371789e026b931c">page</a>; }</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno"><a class="line" href="classMemStore_1_1SlotAndPage.html#a0d16ea06cc8dd5e41dcc944dea6822f9">  114</a></span>        <a class="code hl_class" href="classIpc_1_1Mem_1_1PageId.html">Ipc::Mem::PageId</a> *<a class="code hl_variable" href="classMemStore_1_1SlotAndPage.html#a0d16ea06cc8dd5e41dcc944dea6822f9">slot</a>; </div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno"><a class="line" href="classMemStore_1_1SlotAndPage.html#adc76c0316fcbd504a371789e026b931c">  115</a></span>        <a class="code hl_class" href="classIpc_1_1Mem_1_1PageId.html">Ipc::Mem::PageId</a> *<a class="code hl_variable" href="classMemStore_1_1SlotAndPage.html#adc76c0316fcbd504a371789e026b931c">page</a>; </div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    };</div>
</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno"><a class="line" href="classMemStore.html#a6efac59b222013e06ebf28ce697d1db9">  117</a></span>    <a class="code hl_class" href="classMemStore_1_1SlotAndPage.html">SlotAndPage</a> <a class="code hl_variable" href="classMemStore.html#a6efac59b222013e06ebf28ce697d1db9">waitingFor</a>; </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>};</div>
</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span><span class="comment">// Why use Store as a base? MemStore and SwapDir are both &quot;caches&quot;.</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span><span class="comment">// Why not just use a SwapDir API? That would not help much because Store has</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span><span class="comment">// to check/update memory cache separately from the disk cache. And same API</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span><span class="comment">// would hurt because we can support synchronous get/put, unlike the disks.</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span> </div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span><span class="preprocessor">#endif </span><span class="comment">/* SQUID_SRC_MEMSTORE_H */</span><span class="preprocessor"></span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="ttc" id="aControlled_8h_html"><div class="ttname"><a href="Controlled_8h.html">Controlled.h</a></div></div>
<div class="ttc" id="aMemStore_8h_html_aaa5843c89cde10f0ca8fcca25593c13e"><div class="ttname"><a href="MemStore_8h.html#aaa5843c89cde10f0ca8fcca25593c13e">MemStoreMapExtras</a></div><div class="ttdeci">Ipc::StoreMapItems&lt; MemStoreMapExtraItem &gt; MemStoreMapExtras</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00022">MemStore.h:22</a></div></div>
<div class="ttc" id="aMemStore_8h_html_acfc62e31321821e7833870b44a9866f8"><div class="ttname"><a href="MemStore_8h.html#acfc62e31321821e7833870b44a9866f8">MemStoreMap</a></div><div class="ttdeci">Ipc::StoreMap MemStoreMap</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00023">MemStore.h:23</a></div></div>
<div class="ttc" id="aPageStack_8h_html"><div class="ttname"><a href="PageStack_8h.html">PageStack.h</a></div></div>
<div class="ttc" id="aPage_8h_html"><div class="ttname"><a href="Page_8h.html">Page.h</a></div></div>
<div class="ttc" id="aStoreMap_8h_html"><div class="ttname"><a href="StoreMap_8h.html">StoreMap.h</a></div></div>
<div class="ttc" id="aStore_8h_html"><div class="ttname"><a href="Store_8h.html">Store.h</a></div></div>
<div class="ttc" id="aclassIpc_1_1Mem_1_1PageId_html"><div class="ttname"><a href="classIpc_1_1Mem_1_1PageId.html">Ipc::Mem::PageId</a></div><div class="ttdoc">Shared memory page identifier, address, or handler.</div><div class="ttdef"><b>Definition</b> <a href="Page_8h_source.html#l00023">Page.h:24</a></div></div>
<div class="ttc" id="aclassIpc_1_1Mem_1_1Pointer_html"><div class="ttname"><a href="classIpc_1_1Mem_1_1Pointer.html">Ipc::Mem::Pointer</a></div><div class="ttdef"><b>Definition</b> <a href="Pointer_8h_source.html#l00082">Pointer.h:83</a></div></div>
<div class="ttc" id="aclassIpc_1_1StoreMapAnchor_html"><div class="ttname"><a href="classIpc_1_1StoreMapAnchor.html">Ipc::StoreMapAnchor</a></div><div class="ttdef"><b>Definition</b> <a href="StoreMap_8h_source.html#l00056">StoreMap.h:57</a></div></div>
<div class="ttc" id="aclassIpc_1_1StoreMapCleaner_html"><div class="ttname"><a href="classIpc_1_1StoreMapCleaner.html">Ipc::StoreMapCleaner</a></div><div class="ttdoc">API for adjusting external state when dirty map slice is being freed.</div><div class="ttdef"><b>Definition</b> <a href="StoreMap_8h_source.html#l00397">StoreMap.h:398</a></div></div>
<div class="ttc" id="aclassIpc_1_1StoreMapItems_html"><div class="ttname"><a href="classIpc_1_1StoreMapItems.html">Ipc::StoreMapItems</a></div><div class="ttdef"><b>Definition</b> <a href="StoreMap_8h_source.html#l00121">StoreMap.h:122</a></div></div>
<div class="ttc" id="aclassIpc_1_1StoreMapSlice_html"><div class="ttname"><a href="classIpc_1_1StoreMapSlice.html">Ipc::StoreMapSlice</a></div><div class="ttdef"><b>Definition</b> <a href="StoreMap_8h_source.html#l00028">StoreMap.h:29</a></div></div>
<div class="ttc" id="aclassIpc_1_1StoreMapUpdate_html"><div class="ttname"><a href="classIpc_1_1StoreMapUpdate.html">Ipc::StoreMapUpdate</a></div><div class="ttdoc">Aggregates information required for updating entry metadata and headers.</div><div class="ttdef"><b>Definition</b> <a href="StoreMap_8h_source.html#l00181">StoreMap.h:182</a></div></div>
<div class="ttc" id="aclassIpc_1_1StoreMap_html"><div class="ttname"><a href="classIpc_1_1StoreMap.html">Ipc::StoreMap</a></div><div class="ttdef"><b>Definition</b> <a href="StoreMap_8h_source.html#l00218">StoreMap.h:219</a></div></div>
<div class="ttc" id="aclassMemStore_1_1SlotAndPage_html"><div class="ttname"><a href="classMemStore_1_1SlotAndPage.html">MemStore::SlotAndPage</a></div><div class="ttdoc">temporary storage for slot and page ID pointers; for the waiting cache</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00109">MemStore.h:110</a></div></div>
<div class="ttc" id="aclassMemStore_1_1SlotAndPage_html_a0d16ea06cc8dd5e41dcc944dea6822f9"><div class="ttname"><a href="classMemStore_1_1SlotAndPage.html#a0d16ea06cc8dd5e41dcc944dea6822f9">MemStore::SlotAndPage::slot</a></div><div class="ttdeci">Ipc::Mem::PageId * slot</div><div class="ttdoc">local slot variable, waiting to be filled</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00114">MemStore.h:114</a></div></div>
<div class="ttc" id="aclassMemStore_1_1SlotAndPage_html_acc369f9a917adfdaa53cd575250bdbfc"><div class="ttname"><a href="classMemStore_1_1SlotAndPage.html#acc369f9a917adfdaa53cd575250bdbfc">MemStore::SlotAndPage::SlotAndPage</a></div><div class="ttdeci">SlotAndPage()</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00112">MemStore.h:112</a></div></div>
<div class="ttc" id="aclassMemStore_1_1SlotAndPage_html_adc76c0316fcbd504a371789e026b931c"><div class="ttname"><a href="classMemStore_1_1SlotAndPage.html#adc76c0316fcbd504a371789e026b931c">MemStore::SlotAndPage::page</a></div><div class="ttdeci">Ipc::Mem::PageId * page</div><div class="ttdoc">local page variable, waiting to be filled</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00115">MemStore.h:115</a></div></div>
<div class="ttc" id="aclassMemStore_1_1SlotAndPage_html_afb42923a9438f1ae11dbb3d9dfc25d2f"><div class="ttname"><a href="classMemStore_1_1SlotAndPage.html#afb42923a9438f1ae11dbb3d9dfc25d2f">MemStore::SlotAndPage::operator!</a></div><div class="ttdeci">bool operator!() const</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00113">MemStore.h:113</a></div></div>
<div class="ttc" id="aclassMemStore_html"><div class="ttname"><a href="classMemStore.html">MemStore</a></div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00029">MemStore.h:30</a></div></div>
<div class="ttc" id="aclassMemStore_html_a055a2e9766291392f7376ba57a14368e"><div class="ttname"><a href="classMemStore.html#a055a2e9766291392f7376ba57a14368e">MemStore::updateAnchored</a></div><div class="ttdeci">bool updateAnchored(StoreEntry &amp;) override</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00431">MemStore.cc:431</a></div></div>
<div class="ttc" id="aclassMemStore_html_a14087d28cd0e599dff500a77534078c5"><div class="ttname"><a href="classMemStore.html#a14087d28cd0e599dff500a77534078c5">MemStore::anchorEntry</a></div><div class="ttdeci">void anchorEntry(StoreEntry &amp;e, const sfileno index, const Ipc::StoreMapAnchor &amp;anchor)</div><div class="ttdoc">anchors StoreEntry to an already locked map entry</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00454">MemStore.cc:454</a></div></div>
<div class="ttc" id="aclassMemStore_html_a166fe5bf3514c3511968b310d6c34f4d"><div class="ttname"><a href="classMemStore.html#a166fe5bf3514c3511968b310d6c34f4d">MemStore::updateHeaders</a></div><div class="ttdeci">void updateHeaders(StoreEntry *e) override</div><div class="ttdoc">make stored metadata and HTTP headers the same as in the given entry</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00350">MemStore.cc:350</a></div></div>
<div class="ttc" id="aclassMemStore_html_a1a459a0f0216f3652276a190330ede9f"><div class="ttname"><a href="classMemStore.html#a1a459a0f0216f3652276a190330ede9f">MemStore::lastWritingSlice</a></div><div class="ttdeci">sfileno lastWritingSlice</div><div class="ttdoc">the last allocate slice for writing a store entry (during copyToShm)</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00106">MemStore.h:106</a></div></div>
<div class="ttc" id="aclassMemStore_html_a1b54c0c658c135179677fcfdf946c5b8"><div class="ttname"><a href="classMemStore.html#a1b54c0c658c135179677fcfdf946c5b8">MemStore::currentCount</a></div><div class="ttdeci">uint64_t currentCount() const override</div><div class="ttdoc">the total number of objects stored right now</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00288">MemStore.cc:288</a></div></div>
<div class="ttc" id="aclassMemStore_html_a1bf75cfa4148750ae439746afd08a419"><div class="ttname"><a href="classMemStore.html#a1bf75cfa4148750ae439746afd08a419">MemStore::extras</a></div><div class="ttdeci">Ipc::Mem::Pointer&lt; Extras &gt; extras</div><div class="ttdoc">IDs of pages with slice data.</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00103">MemStore.h:103</a></div></div>
<div class="ttc" id="aclassMemStore_html_a1ee0fa1d52e63ca55a1fefd15cd24176"><div class="ttname"><a href="classMemStore.html#a1ee0fa1d52e63ca55a1fefd15cd24176">MemStore::pageForSlice</a></div><div class="ttdeci">Ipc::Mem::PageId pageForSlice(Ipc::StoreMapSliceId sliceId)</div><div class="ttdoc">safely returns a previously allocated memory page for the given entry slice</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00783">MemStore.cc:783</a></div></div>
<div class="ttc" id="aclassMemStore_html_a29e1ae9aef010b908dd54fdb73c1de1a"><div class="ttname"><a href="classMemStore.html#a29e1ae9aef010b908dd54fdb73c1de1a">MemStore::anchorToCache</a></div><div class="ttdeci">bool anchorToCache(StoreEntry &amp;) override</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00410">MemStore.cc:410</a></div></div>
<div class="ttc" id="aclassMemStore_html_a29e465191ed851119cb4770665cbeeb6"><div class="ttname"><a href="classMemStore.html#a29e465191ed851119cb4770665cbeeb6">MemStore::updateAnchoredWith</a></div><div class="ttdeci">bool updateAnchoredWith(StoreEntry &amp;, const sfileno, const Ipc::StoreMapAnchor &amp;)</div><div class="ttdoc">updates Transients entry after its anchor has been located</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00445">MemStore.cc:445</a></div></div>
<div class="ttc" id="aclassMemStore_html_a2c9191e61faacd84aee7f1a4252ebef9"><div class="ttname"><a href="classMemStore.html#a2c9191e61faacd84aee7f1a4252ebef9">MemStore::copyToShmSlice</a></div><div class="ttdeci">void copyToShmSlice(StoreEntry &amp;e, Ipc::StoreMapAnchor &amp;anchor, Ipc::StoreMap::Slice &amp;slice)</div><div class="ttdoc">copies at most one slice worth of local memory to shared memory</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00716">MemStore.cc:716</a></div></div>
<div class="ttc" id="aclassMemStore_html_a2f71b0551e573458d5d2d69ef7e7267d"><div class="ttname"><a href="classMemStore.html#a2f71b0551e573458d5d2d69ef7e7267d">MemStore::disconnect</a></div><div class="ttdeci">void disconnect(StoreEntry &amp;e)</div><div class="ttdoc">called when the entry is about to forget its association with mem cache</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00938">MemStore.cc:938</a></div></div>
<div class="ttc" id="aclassMemStore_html_a322d821eb0727d38d5713fbd86933bae"><div class="ttname"><a href="classMemStore.html#a322d821eb0727d38d5713fbd86933bae">MemStore::minSize</a></div><div class="ttdeci">uint64_t minSize() const override</div><div class="ttdoc">the minimum size the store will shrink to via normal housekeeping</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00269">MemStore.cc:269</a></div></div>
<div class="ttc" id="aclassMemStore_html_a377c041982215cf33777cfaa7d69e69d"><div class="ttname"><a href="classMemStore.html#a377c041982215cf33777cfaa7d69e69d">MemStore::shouldCache</a></div><div class="ttdeci">bool shouldCache(StoreEntry &amp;e) const</div><div class="ttdoc">whether we should cache the entry</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00590">MemStore.cc:590</a></div></div>
<div class="ttc" id="aclassMemStore_html_a4cd09bb74153155b3fc7f16e56959a81"><div class="ttname"><a href="classMemStore.html#a4cd09bb74153155b3fc7f16e56959a81">MemStore::MemStore</a></div><div class="ttdeci">MemStore()</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00164">MemStore.cc:164</a></div></div>
<div class="ttc" id="aclassMemStore_html_a63941b32a1ba5f969bc479423437efd9"><div class="ttname"><a href="classMemStore.html#a63941b32a1ba5f969bc479423437efd9">MemStore::evictCached</a></div><div class="ttdeci">void evictCached(StoreEntry &amp;) override</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00912">MemStore.cc:912</a></div></div>
<div class="ttc" id="aclassMemStore_html_a650c6af83323f0fb4606ed0b7393d1cd"><div class="ttname"><a href="classMemStore.html#a650c6af83323f0fb4606ed0b7393d1cd">MemStore::copyFromShmSlice</a></div><div class="ttdeci">void copyFromShmSlice(StoreEntry &amp;, const StoreIOBuffer &amp;)</div><div class="ttdoc">imports one shared memory slice into local memory</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00575">MemStore.cc:575</a></div></div>
<div class="ttc" id="aclassMemStore_html_a6d2730835af2d42b262d367b352984b0"><div class="ttname"><a href="classMemStore.html#a6d2730835af2d42b262d367b352984b0">MemStore::freeSlots</a></div><div class="ttdeci">Ipc::Mem::Pointer&lt; Ipc::Mem::PageStack &gt; freeSlots</div><div class="ttdoc">unused map slot IDs</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00099">MemStore.h:99</a></div></div>
<div class="ttc" id="aclassMemStore_html_a6efac59b222013e06ebf28ce697d1db9"><div class="ttname"><a href="classMemStore.html#a6efac59b222013e06ebf28ce697d1db9">MemStore::waitingFor</a></div><div class="ttdeci">SlotAndPage waitingFor</div><div class="ttdoc">a cache for a single &quot;hot&quot; free slot and page</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00117">MemStore.h:117</a></div></div>
<div class="ttc" id="aclassMemStore_html_a74c94a59b97017264b37acef0873c1f1"><div class="ttname"><a href="classMemStore.html#a74c94a59b97017264b37acef0873c1f1">MemStore::completeWriting</a></div><div class="ttdeci">void completeWriting(StoreEntry &amp;e)</div><div class="ttdoc">all data has been received; there will be no more write() calls</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00894">MemStore.cc:894</a></div></div>
<div class="ttc" id="aclassMemStore_html_a9419b9bfcd69fc8542f708a13295ff74"><div class="ttname"><a href="classMemStore.html#a9419b9bfcd69fc8542f708a13295ff74">MemStore::stat</a></div><div class="ttdeci">void stat(StoreEntry &amp;e) const override</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00226">MemStore.cc:226</a></div></div>
<div class="ttc" id="aclassMemStore_html_a9c3f0da19e4b33b1fdfa7f367816564b"><div class="ttname"><a href="classMemStore.html#a9c3f0da19e4b33b1fdfa7f367816564b">MemStore::Extras</a></div><div class="ttdeci">MemStoreMapExtras Extras</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00102">MemStore.h:102</a></div></div>
<div class="ttc" id="aclassMemStore_html_a9fa77f4d33bd5ed3a45bcce12bcec202"><div class="ttname"><a href="classMemStore.html#a9fa77f4d33bd5ed3a45bcce12bcec202">MemStore::maxSize</a></div><div class="ttdeci">uint64_t maxSize() const override</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00275">MemStore.cc:275</a></div></div>
<div class="ttc" id="aclassMemStore_html_aa6f556cb0588d4307e1d115d7ef8daee"><div class="ttname"><a href="classMemStore.html#aa6f556cb0588d4307e1d115d7ef8daee">MemStore::keepInLocalMemory</a></div><div class="ttdeci">bool keepInLocalMemory(const StoreEntry &amp;e) const</div><div class="ttdoc">whether e should be kept in local RAM for possible future caching</div></div>
<div class="ttc" id="aclassMemStore_html_aa7e7ea15c585078eaa9201886e5cd07a"><div class="ttname"><a href="classMemStore.html#aa7e7ea15c585078eaa9201886e5cd07a">MemStore::get</a></div><div class="ttdeci">StoreEntry * get(const cache_key *) override</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00312">MemStore.cc:312</a></div></div>
<div class="ttc" id="aclassMemStore_html_aa88e3b04036dd563a62a7257fa953f6f"><div class="ttname"><a href="classMemStore.html#aa88e3b04036dd563a62a7257fa953f6f">MemStore::copyToShm</a></div><div class="ttdeci">void copyToShm(StoreEntry &amp;e)</div><div class="ttdoc">copies all local data to shared memory</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00680">MemStore.cc:680</a></div></div>
<div class="ttc" id="aclassMemStore_html_aa8db9e6a98fc5ba7c0c0bfe81c134a48"><div class="ttname"><a href="classMemStore.html#aa8db9e6a98fc5ba7c0c0bfe81c134a48">MemStore::maxObjectSize</a></div><div class="ttdeci">int64_t maxObjectSize() const override</div><div class="ttdoc">the maximum size of a storable object; -1 if unlimited</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00294">MemStore.cc:294</a></div></div>
<div class="ttc" id="aclassMemStore_html_aa9b755b5a7f41e3a4780d93178c91a0c"><div class="ttname"><a href="classMemStore.html#aa9b755b5a7f41e3a4780d93178c91a0c">MemStore::nextAppendableSlice</a></div><div class="ttdeci">Ipc::StoreMap::Slice &amp; nextAppendableSlice(const sfileno entryIndex, sfileno &amp;sliceOffset)</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00747">MemStore.cc:747</a></div></div>
<div class="ttc" id="aclassMemStore_html_ab21e2746e3e1971628816fd78fc10540"><div class="ttname"><a href="classMemStore.html#ab21e2746e3e1971628816fd78fc10540">MemStore::EntryLimit</a></div><div class="ttdeci">static int64_t EntryLimit()</div><div class="ttdoc">calculates maximum number of entries we need to store and map</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00966">MemStore.cc:966</a></div></div>
<div class="ttc" id="aclassMemStore_html_ab4e52156ebc0d9999f2f747cdf7fbacb"><div class="ttname"><a href="classMemStore.html#ab4e52156ebc0d9999f2f747cdf7fbacb">MemStore::reserveSapForWriting</a></div><div class="ttdeci">sfileno reserveSapForWriting(Ipc::Mem::PageId &amp;page)</div><div class="ttdoc">finds a slot and a free page to fill or throws</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00794">MemStore.cc:794</a></div></div>
<div class="ttc" id="aclassMemStore_html_abb7a39ec7361cfbfe8ce951c180fef3a"><div class="ttname"><a href="classMemStore.html#abb7a39ec7361cfbfe8ce951c180fef3a">MemStore::init</a></div><div class="ttdeci">void init() override</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00174">MemStore.cc:174</a></div></div>
<div class="ttc" id="aclassMemStore_html_abf2884e7eb9a4317414aa11b20b2c050"><div class="ttname"><a href="classMemStore.html#abf2884e7eb9a4317414aa11b20b2c050">MemStore::ShmWriter</a></div><div class="ttdeci">friend ShmWriter</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00075">MemStore.h:75</a></div></div>
<div class="ttc" id="aclassMemStore_html_acbab5d7bac460d85f98bbf0531acfb60"><div class="ttname"><a href="classMemStore.html#acbab5d7bac460d85f98bbf0531acfb60">MemStore::evictIfFound</a></div><div class="ttdeci">void evictIfFound(const cache_key *) override</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00931">MemStore.cc:931</a></div></div>
<div class="ttc" id="aclassMemStore_html_acd4c9281b1261e2f02e48d27a7324529"><div class="ttname"><a href="classMemStore.html#acd4c9281b1261e2f02e48d27a7324529">MemStore::reference</a></div><div class="ttdeci">void reference(StoreEntry &amp;e) override</div><div class="ttdoc">somebody needs this entry (many cache replacement policies need to know)</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00300">MemStore.cc:300</a></div></div>
<div class="ttc" id="aclassMemStore_html_acf842df3b35a7c6a710cbbc50ca2a3d5"><div class="ttname"><a href="classMemStore.html#acf842df3b35a7c6a710cbbc50ca2a3d5">MemStore::Enabled</a></div><div class="ttdeci">static bool Enabled()</div><div class="ttdoc">whether Squid is correctly configured to use a shared memory cache</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00068">MemStore.h:68</a></div></div>
<div class="ttc" id="aclassMemStore_html_ad85a1109b92079224fb13a3f60e12ed9"><div class="ttname"><a href="classMemStore.html#ad85a1109b92079224fb13a3f60e12ed9">MemStore::updateHeadersOrThrow</a></div><div class="ttdeci">void updateHeadersOrThrow(Ipc::StoreMapUpdate &amp;update)</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00370">MemStore.cc:370</a></div></div>
<div class="ttc" id="aclassMemStore_html_ad9c18a888d40a85a127b705090cbe86c"><div class="ttname"><a href="classMemStore.html#ad9c18a888d40a85a127b705090cbe86c">MemStore::Requested</a></div><div class="ttdeci">static bool Requested()</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00959">MemStore.cc:959</a></div></div>
<div class="ttc" id="aclassMemStore_html_add7c8be9b87d85109662e51383a74040"><div class="ttname"><a href="classMemStore.html#add7c8be9b87d85109662e51383a74040">MemStore::copyFromShm</a></div><div class="ttdeci">bool copyFromShm(StoreEntry &amp;e, const sfileno index, const Ipc::StoreMapAnchor &amp;anchor)</div><div class="ttdoc">copies the entire entry from shared to local memory</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00479">MemStore.cc:479</a></div></div>
<div class="ttc" id="aclassMemStore_html_adde9a8fd40383d29423a86b96d97b97c"><div class="ttname"><a href="classMemStore.html#adde9a8fd40383d29423a86b96d97b97c">MemStore::dereference</a></div><div class="ttdeci">bool dereference(StoreEntry &amp;e) override</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00305">MemStore.cc:305</a></div></div>
<div class="ttc" id="aclassMemStore_html_addfec880935b0e198b6e8f98f25fc01a"><div class="ttname"><a href="classMemStore.html#addfec880935b0e198b6e8f98f25fc01a">MemStore::~MemStore</a></div><div class="ttdeci">~MemStore() override</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00168">MemStore.cc:168</a></div></div>
<div class="ttc" id="aclassMemStore_html_adffb727d4a8888640cd7fc5fe0e75387"><div class="ttname"><a href="classMemStore.html#adffb727d4a8888640cd7fc5fe0e75387">MemStore::write</a></div><div class="ttdeci">void write(StoreEntry &amp;e)</div><div class="ttdoc">copy non-shared entry data of the being-cached entry to our cache</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00855">MemStore.cc:855</a></div></div>
<div class="ttc" id="aclassMemStore_html_aeea87a7c519b9a2b75b0032f2a9823b8"><div class="ttname"><a href="classMemStore.html#aeea87a7c519b9a2b75b0032f2a9823b8">MemStore::currentSize</a></div><div class="ttdeci">uint64_t currentSize() const override</div><div class="ttdoc">current size</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00281">MemStore.cc:281</a></div></div>
<div class="ttc" id="aclassMemStore_html_af5cfd7812cfd6f492a6e9aeeecc07354"><div class="ttname"><a href="classMemStore.html#af5cfd7812cfd6f492a6e9aeeecc07354">MemStore::maintain</a></div><div class="ttdeci">void maintain() override</div><div class="ttdoc">perform regular periodic maintenance; TODO: move to UFSSwapDir::Maintain</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00264">MemStore.cc:264</a></div></div>
<div class="ttc" id="aclassMemStore_html_af81030d4ddf06cc2a87eb6d1b5f87146"><div class="ttname"><a href="classMemStore.html#af81030d4ddf06cc2a87eb6d1b5f87146">MemStore::startCaching</a></div><div class="ttdeci">bool startCaching(StoreEntry &amp;e)</div><div class="ttdoc">locks map anchor and preps to store the entry in shared memory</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00657">MemStore.cc:657</a></div></div>
<div class="ttc" id="aclassMemStore_html_af861c6fcf103e39a4452f55b428d99ab"><div class="ttname"><a href="classMemStore.html#af861c6fcf103e39a4452f55b428d99ab">MemStore::noteFreeMapSlice</a></div><div class="ttdeci">void noteFreeMapSlice(const Ipc::StoreMapSliceId sliceId) override</div><div class="ttdoc">adjust slice-linked state before a locked Readable slice is erased</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00833">MemStore.cc:833</a></div></div>
<div class="ttc" id="aclassMemStore_html_afb2e3f2b8bc24ab42b1285e1a06ae837"><div class="ttname"><a href="classMemStore.html#afb2e3f2b8bc24ab42b1285e1a06ae837">MemStore::map</a></div><div class="ttdeci">MemStoreMap * map</div><div class="ttdoc">index of mem-cached entries</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00100">MemStore.h:100</a></div></div>
<div class="ttc" id="aclassMemStore_html_afbbdd98f5cc55093c2c7c7e035626765"><div class="ttname"><a href="classMemStore.html#afbbdd98f5cc55093c2c7c7e035626765">MemStore::getStats</a></div><div class="ttdeci">void getStats(StoreInfoStats &amp;stats) const override</div><div class="ttdoc">collect statistics</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00205">MemStore.cc:205</a></div></div>
<div class="ttc" id="aclassMemStore_html_affbcceec8059e5e5502e697b969eb5b2"><div class="ttname"><a href="classMemStore.html#affbcceec8059e5e5502e697b969eb5b2">MemStore::create</a></div><div class="ttdeci">void create() override</div><div class="ttdoc">create system resources needed for this store to operate in the future</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00048">MemStore.h:48</a></div></div>
<div class="ttc" id="aclassShmWriter_html"><div class="ttname"><a href="classShmWriter.html">ShmWriter</a></div><div class="ttdef"><b>Definition</b> <a href="MemStore_8cc_source.html#l00038">MemStore.cc:39</a></div></div>
<div class="ttc" id="aclassStoreEntry_html"><div class="ttname"><a href="classStoreEntry.html">StoreEntry</a></div><div class="ttdef"><b>Definition</b> <a href="Store_8h_source.html#l00037">Store.h:38</a></div></div>
<div class="ttc" id="aclassStoreIOBuffer_html"><div class="ttname"><a href="classStoreIOBuffer.html">StoreIOBuffer</a></div><div class="ttdef"><b>Definition</b> <a href="StoreIOBuffer_8h_source.html#l00015">StoreIOBuffer.h:16</a></div></div>
<div class="ttc" id="aclassStoreInfoStats_html"><div class="ttname"><a href="classStoreInfoStats.html">StoreInfoStats</a></div><div class="ttdoc">High-level store statistics used by mgr:info action. Used inside PODs!</div><div class="ttdef"><b>Definition</b> <a href="StoreStats_8h_source.html#l00013">StoreStats.h:14</a></div></div>
<div class="ttc" id="aclassStore_1_1Controlled_html"><div class="ttname"><a href="classStore_1_1Controlled.html">Store::Controlled</a></div><div class="ttdef"><b>Definition</b> <a href="Controlled_8h_source.html#l00018">Controlled.h:19</a></div></div>
<div class="ttc" id="anamespaceIpc_html_aba4cfbbff5c598509762a9c46e755a76"><div class="ttname"><a href="namespaceIpc.html#aba4cfbbff5c598509762a9c46e755a76">Ipc::StoreMapSliceId</a></div><div class="ttdeci">int32_t StoreMapSliceId</div><div class="ttdef"><b>Definition</b> <a href="StoreMap_8h_source.html#l00024">StoreMap.h:24</a></div></div>
<div class="ttc" id="astore_2forward_8h_html_ab1424e1b13666cc28f4c5cb05f8c8305"><div class="ttname"><a href="store_2forward_8h.html#ab1424e1b13666cc28f4c5cb05f8c8305">cache_key</a></div><div class="ttdeci">unsigned char cache_key</div><div class="ttdoc">Store key.</div><div class="ttdef"><b>Definition</b> <a href="store_2forward_8h_source.html#l00029">forward.h:29</a></div></div>
<div class="ttc" id="astore_2forward_8h_html_ad36423633e813fcd30e5855b52f769ef"><div class="ttname"><a href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a></div><div class="ttdeci">signed_int32_t sfileno</div><div class="ttdef"><b>Definition</b> <a href="store_2forward_8h_source.html#l00022">forward.h:22</a></div></div>
<div class="ttc" id="astructMemStoreMapExtraItem_html"><div class="ttname"><a href="structMemStoreMapExtraItem.html">MemStoreMapExtraItem</a></div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00019">MemStore.h:19</a></div></div>
<div class="ttc" id="astructMemStoreMapExtraItem_html_add39697d8ea394a47ad6118e313304a9"><div class="ttname"><a href="structMemStoreMapExtraItem.html#add39697d8ea394a47ad6118e313304a9">MemStoreMapExtraItem::page</a></div><div class="ttdeci">Ipc::Mem::PageId page</div><div class="ttdoc">shared memory page with entry slice content</div><div class="ttdef"><b>Definition</b> <a href="MemStore_8h_source.html#l00020">MemStore.h:20</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_3c69fff7f634b97773a4d39d4565ffb4.html">squid</a></li><li class="navelem"><a class="el" href="dir_27a06220d184fcc3bd2c56b7794ae45b.html">src</a></li><li class="navelem"><a class="el" href="MemStore_8h.html">MemStore.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
