<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Squid Web Cache: FileMap Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Squid Web Cache<span id="projectnumber">&#160;v8/master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classFileMap.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classFileMap-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">FileMap Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="FileMap_8h_source.html">FileMap.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac7fb555e7998a62dabf2382ca10d2d2f" id="r_ac7fb555e7998a62dabf2382ca10d2d2f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileMap.html#ac7fb555e7998a62dabf2382ca10d2d2f">FileMap</a> ()</td></tr>
<tr class="separator:ac7fb555e7998a62dabf2382ca10d2d2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16e24dbac4e132f84256698a00b7706a" id="r_a16e24dbac4e132f84256698a00b7706a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileMap.html#a16e24dbac4e132f84256698a00b7706a">~FileMap</a> ()</td></tr>
<tr class="separator:a16e24dbac4e132f84256698a00b7706a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa9cb6a21db5a3deb75c489e32db6164" id="r_aaa9cb6a21db5a3deb75c489e32db6164"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileMap.html#aaa9cb6a21db5a3deb75c489e32db6164">setBit</a> (<a class="el" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a> num)</td></tr>
<tr class="separator:aaa9cb6a21db5a3deb75c489e32db6164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46c7310aad58162342fd1ce87ca39e55" id="r_a46c7310aad58162342fd1ce87ca39e55"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileMap.html#a46c7310aad58162342fd1ce87ca39e55">testBit</a> (<a class="el" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a> num) const</td></tr>
<tr class="memdesc:a46c7310aad58162342fd1ce87ca39e55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test whether the num-th bit in the <a class="el" href="classFileMap.html">FileMap</a> is set.  <br /></td></tr>
<tr class="separator:a46c7310aad58162342fd1ce87ca39e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4db43e7962c215181594284c393f3c82" id="r_a4db43e7962c215181594284c393f3c82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileMap.html#a4db43e7962c215181594284c393f3c82">clearBit</a> (<a class="el" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a> num)</td></tr>
<tr class="separator:a4db43e7962c215181594284c393f3c82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa244e377f2697400286a67d8e104cc8e" id="r_aa244e377f2697400286a67d8e104cc8e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileMap.html#aa244e377f2697400286a67d8e104cc8e">allocate</a> (<a class="el" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a> suggestion)</td></tr>
<tr class="separator:aa244e377f2697400286a67d8e104cc8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a8c4be119ab151263d04d52623f394b" id="r_a9a8c4be119ab151263d04d52623f394b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileMap.html#a9a8c4be119ab151263d04d52623f394b">capacity</a> () const</td></tr>
<tr class="memdesc:a9a8c4be119ab151263d04d52623f394b"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the max number of slots in the <a class="el" href="classFileMap.html">FileMap</a>  <br /></td></tr>
<tr class="separator:a9a8c4be119ab151263d04d52623f394b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5346e15abd755dde3ec8201a9cca459" id="r_af5346e15abd755dde3ec8201a9cca459"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileMap.html#af5346e15abd755dde3ec8201a9cca459">numFilesInMap</a> () const</td></tr>
<tr class="memdesc:af5346e15abd755dde3ec8201a9cca459"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the number of used slots in the <a class="el" href="classFileMap.html">FileMap</a>  <br /></td></tr>
<tr class="separator:af5346e15abd755dde3ec8201a9cca459"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a9411fbd199f7845fcde3c43f7eff76da" id="r_a9411fbd199f7845fcde3c43f7eff76da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileMap.html#a9411fbd199f7845fcde3c43f7eff76da">grow</a> ()</td></tr>
<tr class="memdesc:a9411fbd199f7845fcde3c43f7eff76da"><td class="mdescLeft">&#160;</td><td class="mdescRight">grow the <a class="el" href="classFileMap.html">FileMap</a> (size is doubled each time, up to 2^24 bits)  <br /></td></tr>
<tr class="separator:a9411fbd199f7845fcde3c43f7eff76da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acee9f9bc0249884a2e59b6a51fb089a2" id="r_acee9f9bc0249884a2e59b6a51fb089a2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileMap.html#acee9f9bc0249884a2e59b6a51fb089a2">FileMap</a> (const <a class="el" href="classFileMap.html">FileMap</a> &amp;)</td></tr>
<tr class="separator:acee9f9bc0249884a2e59b6a51fb089a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add241c5d43e5bf9d3ff82f8151f3f89b" id="r_add241c5d43e5bf9d3ff82f8151f3f89b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classFileMap.html">FileMap</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileMap.html#add241c5d43e5bf9d3ff82f8151f3f89b">operator=</a> (const <a class="el" href="classFileMap.html">FileMap</a> &amp;)</td></tr>
<tr class="separator:add241c5d43e5bf9d3ff82f8151f3f89b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa3cce91c7a84e44b90b9bcfaf3b18123" id="r_aa3cce91c7a84e44b90b9bcfaf3b18123"><td class="memItemLeft" align="right" valign="top"><a class="el" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileMap.html#aa3cce91c7a84e44b90b9bcfaf3b18123">capacity_</a></td></tr>
<tr class="memdesc:aa3cce91c7a84e44b90b9bcfaf3b18123"><td class="mdescLeft">&#160;</td><td class="mdescRight">max number of files which can be tracked in the current store  <br /></td></tr>
<tr class="separator:aa3cce91c7a84e44b90b9bcfaf3b18123"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af69a7d5134d03bb88341019de75d39fc" id="r_af69a7d5134d03bb88341019de75d39fc"><td class="memItemLeft" align="right" valign="top">unsigned <a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileMap.html#af69a7d5134d03bb88341019de75d39fc">usedSlots_</a></td></tr>
<tr class="memdesc:af69a7d5134d03bb88341019de75d39fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">used slots in the map  <br /></td></tr>
<tr class="separator:af69a7d5134d03bb88341019de75d39fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a749bac130afa2703ca78418737f2b7" id="r_a3a749bac130afa2703ca78418737f2b7"><td class="memItemLeft" align="right" valign="top">unsigned <a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileMap.html#a3a749bac130afa2703ca78418737f2b7">nwords</a></td></tr>
<tr class="memdesc:a3a749bac130afa2703ca78418737f2b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of "long ints" making up the filemap  <br /></td></tr>
<tr class="separator:a3a749bac130afa2703ca78418737f2b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ccf53afa7ad7aa1cc0c65e836f754c3" id="r_a5ccf53afa7ad7aa1cc0c65e836f754c3"><td class="memItemLeft" align="right" valign="top">unsigned long *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileMap.html#a5ccf53afa7ad7aa1cc0c65e836f754c3">bitmap</a></td></tr>
<tr class="separator:a5ccf53afa7ad7aa1cc0c65e836f754c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A bitmap used for managing UFS <a class="el" href="classStoreEntry.html">StoreEntry</a> "file numbers".</p>
<p>Nth bit represents whether file number N is used. The map automatically grows to hold up to 2^24 bits. New bit is "off" or zero by default, representing unused fileno. TODO: consider using std::bitset instead. </p>

<p class="definition">Definition at line <a class="el" href="FileMap_8h_source.html#l00023">23</a> of file <a class="el" href="FileMap_8h_source.html">FileMap.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac7fb555e7998a62dabf2382ca10d2d2f" name="ac7fb555e7998a62dabf2382ca10d2d2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7fb555e7998a62dabf2382ca10d2d2f">&#9670;&#160;</a></span>FileMap() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FileMap::FileMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="filemap_8cc_source.html#l00035">35</a> of file <a class="el" href="filemap_8cc_source.html">filemap.cc</a>.</p>

<p class="reference">References <a class="el" href="classFileMap.html#a5ccf53afa7ad7aa1cc0c65e836f754c3">bitmap</a>, <a class="el" href="classFileMap.html#aa3cce91c7a84e44b90b9bcfaf3b18123">capacity_</a>, <a class="el" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>, <a class="el" href="classFileMap.html#a3a749bac130afa2703ca78418737f2b7">nwords</a>, and <a class="el" href="xalloc_8cc.html#ad10c7ad81edd7cbbdfd8b6502aa88d65">xcalloc()</a>.</p>

</div>
</div>
<a id="a16e24dbac4e132f84256698a00b7706a" name="a16e24dbac4e132f84256698a00b7706a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16e24dbac4e132f84256698a00b7706a">&#9670;&#160;</a></span>~FileMap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FileMap::~FileMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="filemap_8cc_source.html#l00135">135</a> of file <a class="el" href="filemap_8cc_source.html">filemap.cc</a>.</p>

<p class="reference">References <a class="el" href="classFileMap.html#a5ccf53afa7ad7aa1cc0c65e836f754c3">bitmap</a>, and <a class="el" href="xalloc_8h.html#a74ad4c3c3aa58c8fea96eb0dc090fd67">safe_free</a>.</p>

</div>
</div>
<a id="acee9f9bc0249884a2e59b6a51fb089a2" name="acee9f9bc0249884a2e59b6a51fb089a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acee9f9bc0249884a2e59b6a51fb089a2">&#9670;&#160;</a></span>FileMap() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FileMap::FileMap </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFileMap.html">FileMap</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa244e377f2697400286a67d8e104cc8e" name="aa244e377f2697400286a67d8e104cc8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa244e377f2697400286a67d8e104cc8e">&#9670;&#160;</a></span>allocate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a> FileMap::allocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a>&#160;</td>
          <td class="paramname"><em>suggestion</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>locate an unused slot in the <a class="el" href="classFileMap.html">FileMap</a>, possibly at or after position suggestion</p>
<p>Obtain the location of an unused slot in the <a class="el" href="classFileMap.html">FileMap</a>, growing it if needed. The suggestion is only an advice; there is no guarantee that it will be followed. </p>

<p class="definition">Definition at line <a class="el" href="filemap_8cc_source.html#l00104">104</a> of file <a class="el" href="filemap_8cc_source.html">filemap.cc</a>.</p>

<p class="reference">References <a class="el" href="filemap_8cc.html#ab4d5467e7346c7c18fc838e34e27db23">ALL_ONES</a>, <a class="el" href="classFileMap.html#aa244e377f2697400286a67d8e104cc8e">allocate()</a>, <a class="el" href="classFileMap.html#a5ccf53afa7ad7aa1cc0c65e836f754c3">bitmap</a>, <a class="el" href="filemap_8cc.html#a82874299453a0518426fa41591abcb61">BITS_IN_A_LONG</a>, <a class="el" href="classFileMap.html#aa3cce91c7a84e44b90b9bcfaf3b18123">capacity_</a>, <a class="el" href="classFileMap.html#a9411fbd199f7845fcde3c43f7eff76da">grow()</a>, <a class="el" href="filemap_8cc.html#aa50535cc35690f93ef5fe4aadc145e6a">LONG_BIT_SHIFT</a>, <a class="el" href="classFileMap.html#a3a749bac130afa2703ca78418737f2b7">nwords</a>, and <a class="el" href="classFileMap.html#a46c7310aad58162342fd1ce87ca39e55">testBit()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classFileMap.html#aa244e377f2697400286a67d8e104cc8e">allocate()</a>.</p>

</div>
</div>
<a id="a9a8c4be119ab151263d04d52623f394b" name="a9a8c4be119ab151263d04d52623f394b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a8c4be119ab151263d04d52623f394b">&#9670;&#160;</a></span>capacity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a> FileMap::capacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="FileMap_8h_source.html#l00060">60</a> of file <a class="el" href="FileMap_8h_source.html">FileMap.h</a>.</p>

<p class="reference">References <a class="el" href="classFileMap.html#aa3cce91c7a84e44b90b9bcfaf3b18123">capacity_</a>.</p>

</div>
</div>
<a id="a4db43e7962c215181594284c393f3c82" name="a4db43e7962c215181594284c393f3c82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4db43e7962c215181594284c393f3c82">&#9670;&#160;</a></span>clearBit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FileMap::clearBit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a>&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear the num-th bit in the <a class="el" href="classFileMap.html">FileMap</a></p>
<dl class="section warning"><dt>Warning</dt><dd>that clearBit doesn't do any bounds checking, nor it checks that the bit is set before clearing. The caller will have to ensure that both are true using testBit before clearing. </dd></dl>

<p class="definition">Definition at line <a class="el" href="filemap_8cc_source.html#l00084">84</a> of file <a class="el" href="filemap_8cc_source.html">filemap.cc</a>.</p>

<p class="reference">References <a class="el" href="classFileMap.html#a5ccf53afa7ad7aa1cc0c65e836f754c3">bitmap</a>, <a class="el" href="filemap_8cc.html#aa3cffbe04280af237f49b21115072ddc">LONG_BIT_MASK</a>, <a class="el" href="filemap_8cc.html#aa50535cc35690f93ef5fe4aadc145e6a">LONG_BIT_SHIFT</a>, and <a class="el" href="classFileMap.html#af69a7d5134d03bb88341019de75d39fc">usedSlots_</a>.</p>

</div>
</div>
<a id="a9411fbd199f7845fcde3c43f7eff76da" name="a9411fbd199f7845fcde3c43f7eff76da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9411fbd199f7845fcde3c43f7eff76da">&#9670;&#160;</a></span>grow()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FileMap::grow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="filemap_8cc_source.html#l00045">45</a> of file <a class="el" href="filemap_8cc_source.html">filemap.cc</a>.</p>

<p class="reference">References <a class="el" href="assert_8h.html#a33fa45e42155e69ce8d0da0fd978b351">assert</a>, <a class="el" href="classFileMap.html#a5ccf53afa7ad7aa1cc0c65e836f754c3">bitmap</a>, <a class="el" href="classFileMap.html#aa3cce91c7a84e44b90b9bcfaf3b18123">capacity_</a>, <a class="el" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>, <a class="el" href="filemap_8cc.html#aa50535cc35690f93ef5fe4aadc145e6a">LONG_BIT_SHIFT</a>, <a class="el" href="classFileMap.html#a3a749bac130afa2703ca78418737f2b7">nwords</a>, <a class="el" href="xalloc_8cc.html#ad10c7ad81edd7cbbdfd8b6502aa88d65">xcalloc()</a>, and <a class="el" href="negotiate__wrapper_8cc.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>.</p>

<p class="reference">Referenced by <a class="el" href="classFileMap.html#aa244e377f2697400286a67d8e104cc8e">allocate()</a>, and <a class="el" href="classFileMap.html#aaa9cb6a21db5a3deb75c489e32db6164">setBit()</a>.</p>

</div>
</div>
<a id="af5346e15abd755dde3ec8201a9cca459" name="af5346e15abd755dde3ec8201a9cca459"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5346e15abd755dde3ec8201a9cca459">&#9670;&#160;</a></span>numFilesInMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a> FileMap::numFilesInMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="FileMap_8h_source.html#l00063">63</a> of file <a class="el" href="FileMap_8h_source.html">FileMap.h</a>.</p>

<p class="reference">References <a class="el" href="classFileMap.html#af69a7d5134d03bb88341019de75d39fc">usedSlots_</a>.</p>

</div>
</div>
<a id="add241c5d43e5bf9d3ff82f8151f3f89b" name="add241c5d43e5bf9d3ff82f8151f3f89b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add241c5d43e5bf9d3ff82f8151f3f89b">&#9670;&#160;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classFileMap.html">FileMap</a> &amp; FileMap::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFileMap.html">FileMap</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aaa9cb6a21db5a3deb75c489e32db6164" name="aaa9cb6a21db5a3deb75c489e32db6164"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa9cb6a21db5a3deb75c489e32db6164">&#9670;&#160;</a></span>setBit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FileMap::setBit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a>&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the num-th bit in the <a class="el" href="classFileMap.html">FileMap</a></p>
<dl class="section warning"><dt>Warning</dt><dd><a class="el" href="classFileMap.html">FileMap</a>'s backing storage will be extended as needed to hold the representation, but if the bit is already set it will break the file number accounting, so the caller must ensure that setBit is only called if the bit is not already set, by using testBit on it before. </dd></dl>

<p class="definition">Definition at line <a class="el" href="filemap_8cc_source.html#l00062">62</a> of file <a class="el" href="filemap_8cc_source.html">filemap.cc</a>.</p>

<p class="reference">References <a class="el" href="classFileMap.html#a5ccf53afa7ad7aa1cc0c65e836f754c3">bitmap</a>, <a class="el" href="classFileMap.html#aa3cce91c7a84e44b90b9bcfaf3b18123">capacity_</a>, <a class="el" href="classFileMap.html#a9411fbd199f7845fcde3c43f7eff76da">grow()</a>, <a class="el" href="filemap_8cc.html#aa3cffbe04280af237f49b21115072ddc">LONG_BIT_MASK</a>, <a class="el" href="filemap_8cc.html#aa50535cc35690f93ef5fe4aadc145e6a">LONG_BIT_SHIFT</a>, and <a class="el" href="classFileMap.html#af69a7d5134d03bb88341019de75d39fc">usedSlots_</a>.</p>

</div>
</div>
<a id="a46c7310aad58162342fd1ce87ca39e55" name="a46c7310aad58162342fd1ce87ca39e55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46c7310aad58162342fd1ce87ca39e55">&#9670;&#160;</a></span>testBit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FileMap::testBit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a>&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="filemap_8cc_source.html#l00092">92</a> of file <a class="el" href="filemap_8cc_source.html">filemap.cc</a>.</p>

<p class="reference">References <a class="el" href="classFileMap.html#a5ccf53afa7ad7aa1cc0c65e836f754c3">bitmap</a>, <a class="el" href="classFileMap.html#aa3cce91c7a84e44b90b9bcfaf3b18123">capacity_</a>, <a class="el" href="filemap_8cc.html#aa3cffbe04280af237f49b21115072ddc">LONG_BIT_MASK</a>, and <a class="el" href="filemap_8cc.html#aa50535cc35690f93ef5fe4aadc145e6a">LONG_BIT_SHIFT</a>.</p>

<p class="reference">Referenced by <a class="el" href="classFileMap.html#aa244e377f2697400286a67d8e104cc8e">allocate()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5ccf53afa7ad7aa1cc0c65e836f754c3" name="a5ccf53afa7ad7aa1cc0c65e836f754c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ccf53afa7ad7aa1cc0c65e836f754c3">&#9670;&#160;</a></span>bitmap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long* FileMap::bitmap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="FileMap_8h_source.html#l00076">76</a> of file <a class="el" href="FileMap_8h_source.html">FileMap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="classFileMap.html#ac7fb555e7998a62dabf2382ca10d2d2f">FileMap()</a>, <a class="el" href="classFileMap.html#a16e24dbac4e132f84256698a00b7706a">~FileMap()</a>, <a class="el" href="classFileMap.html#aa244e377f2697400286a67d8e104cc8e">allocate()</a>, <a class="el" href="classFileMap.html#a4db43e7962c215181594284c393f3c82">clearBit()</a>, <a class="el" href="classFileMap.html#a9411fbd199f7845fcde3c43f7eff76da">grow()</a>, <a class="el" href="classFileMap.html#aaa9cb6a21db5a3deb75c489e32db6164">setBit()</a>, and <a class="el" href="classFileMap.html#a46c7310aad58162342fd1ce87ca39e55">testBit()</a>.</p>

</div>
</div>
<a id="aa3cce91c7a84e44b90b9bcfaf3b18123" name="aa3cce91c7a84e44b90b9bcfaf3b18123"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3cce91c7a84e44b90b9bcfaf3b18123">&#9670;&#160;</a></span>capacity_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="store_2forward_8h.html#ad36423633e813fcd30e5855b52f769ef">sfileno</a> FileMap::capacity_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="FileMap_8h_source.html#l00071">71</a> of file <a class="el" href="FileMap_8h_source.html">FileMap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="classFileMap.html#ac7fb555e7998a62dabf2382ca10d2d2f">FileMap()</a>, <a class="el" href="classFileMap.html#aa244e377f2697400286a67d8e104cc8e">allocate()</a>, <a class="el" href="classFileMap.html#a9a8c4be119ab151263d04d52623f394b">capacity()</a>, <a class="el" href="classFileMap.html#a9411fbd199f7845fcde3c43f7eff76da">grow()</a>, <a class="el" href="classFileMap.html#aaa9cb6a21db5a3deb75c489e32db6164">setBit()</a>, and <a class="el" href="classFileMap.html#a46c7310aad58162342fd1ce87ca39e55">testBit()</a>.</p>

</div>
</div>
<a id="a3a749bac130afa2703ca78418737f2b7" name="a3a749bac130afa2703ca78418737f2b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a749bac130afa2703ca78418737f2b7">&#9670;&#160;</a></span>nwords</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a> FileMap::nwords</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="FileMap_8h_source.html#l00075">75</a> of file <a class="el" href="FileMap_8h_source.html">FileMap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="classFileMap.html#ac7fb555e7998a62dabf2382ca10d2d2f">FileMap()</a>, <a class="el" href="classFileMap.html#aa244e377f2697400286a67d8e104cc8e">allocate()</a>, and <a class="el" href="classFileMap.html#a9411fbd199f7845fcde3c43f7eff76da">grow()</a>.</p>

</div>
</div>
<a id="af69a7d5134d03bb88341019de75d39fc" name="af69a7d5134d03bb88341019de75d39fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af69a7d5134d03bb88341019de75d39fc">&#9670;&#160;</a></span>usedSlots_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a> FileMap::usedSlots_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="FileMap_8h_source.html#l00073">73</a> of file <a class="el" href="FileMap_8h_source.html">FileMap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="classFileMap.html#a4db43e7962c215181594284c393f3c82">clearBit()</a>, <a class="el" href="classFileMap.html#af5346e15abd755dde3ec8201a9cca459">numFilesInMap()</a>, and <a class="el" href="classFileMap.html#aaa9cb6a21db5a3deb75c489e32db6164">setBit()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>squid/src/<a class="el" href="FileMap_8h_source.html">FileMap.h</a></li>
<li>squid/src/<a class="el" href="filemap_8cc_source.html">filemap.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classFileMap.html">FileMap</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
