<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Squid Web Cache: squid/src/store/SwapMetaIn.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Squid Web Cache<span id="projectnumber">&#160;v8/master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('SwapMetaIn_8cc_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">SwapMetaIn.cc</div></div>
</div><!--header-->
<div class="contents">
<a href="SwapMetaIn_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"> * Copyright (C) 1996-2025 The Squid Software Foundation and contributors</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> *</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"> * Squid software is distributed under GPLv2+ license and includes</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"> * contributions from numerous individuals and organizations.</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"> * Please see the COPYING and CONTRIBUTORS files for details.</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment"> */</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;<a class="code" href="squid_8h.html">squid.h</a>&quot;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &quot;<a class="code" href="Raw_8h.html">base/Raw.h</a>&quot;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &quot;<a class="code" href="TextException_8h.html">base/TextException.h</a>&quot;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &quot;<a class="code" href="int_8h.html">int.h</a>&quot;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &quot;<a class="code" href="md5_8h.html">md5.h</a>&quot;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="MemObject_8h.html">MemObject.h</a>&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="SBuf_8h.html">sbuf/SBuf.h</a>&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="sbuf_2Stream_8h.html">sbuf/Stream.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="SquidMath_8h.html">SquidMath.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;<a class="code" href="Store_8h.html">Store.h</a>&quot;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="SwapMeta_8h.html">store/SwapMeta.h</a>&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &quot;<a class="code" href="SwapMetaIn_8h.html">store/SwapMetaIn.h</a>&quot;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;<a class="code" href="SwapMetaView_8h.html">store/SwapMetaView.h</a>&quot;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespaceStore.html">Store</a> {</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="foldopen" id="foldopen00026" data-start="{" data-end="};">
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaIterator.html">   26</a></span><span class="keyword">class </span><a class="code hl_class" href="classStore_1_1SwapMetaIterator.html">SwapMetaIterator</a></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>{</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>    <span class="comment">/* some of the standard iterator traits */</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaIterator.html#ac7cb6ba9e623ce1ac23261737854d041">   30</a></span>    <span class="keyword">using </span><a class="code hl_typedef" href="classStore_1_1SwapMetaIterator.html#ac7cb6ba9e623ce1ac23261737854d041">iterator_category</a> = std::forward_iterator_tag;</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaIterator.html#a7c3fb5f61f45c056f65f3b8d64f68d15">   31</a></span>    <span class="keyword">using </span><a class="code hl_class" href="classStore_1_1SwapMetaView.html">value_type</a> = <span class="keyword">const</span> <a class="code hl_class" href="classStore_1_1SwapMetaView.html">SwapMetaView</a>;</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaIterator.html#a03dea53d77d08a222e943411010068a2">   32</a></span>    <span class="keyword">using </span><a class="code hl_class" href="classStore_1_1SwapMetaView.html">pointer</a> = <a class="code hl_class" href="classStore_1_1SwapMetaView.html">value_type</a> *;</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaIterator.html#a6d8b496a186f3a422fbff6f096a23352">   33</a></span>    <span class="keyword">using </span><a class="code hl_class" href="classStore_1_1SwapMetaView.html">reference</a> = <a class="code hl_class" href="classStore_1_1SwapMetaView.html">value_type</a> &amp;;</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    <a class="code hl_class" href="classStore_1_1SwapMetaIterator.html">SwapMetaIterator</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *start, <span class="keyword">const</span> <span class="keywordtype">void</span> *end);</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span> </div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    <span class="comment">/* some of the standard iterator methods */</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaIterator.html#a020410569215f4b88005f617c694f525">   39</a></span>    <a class="code hl_class" href="classStore_1_1SwapMetaView.html">reference</a> <a class="code hl_function" href="classStore_1_1SwapMetaIterator.html#a020410569215f4b88005f617c694f525">operator *</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classStore_1_1SwapMetaIterator.html#a048105e11001608e0ed1bc5182e2495b">meta_</a>; }</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaIterator.html#af2aae96d26435410fd77f74c163a9a51">   40</a></span>    <a class="code hl_class" href="classStore_1_1SwapMetaView.html">pointer</a> <a class="code hl_function" href="classStore_1_1SwapMetaIterator.html#af2aae96d26435410fd77f74c163a9a51">operator -&gt;</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> &amp;<a class="code hl_variable" href="classStore_1_1SwapMetaIterator.html#a048105e11001608e0ed1bc5182e2495b">meta_</a>; }</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    <a class="code hl_class" href="classStore_1_1SwapMetaIterator.html">SwapMetaIterator</a>&amp; <a class="code hl_function" href="classStore_1_1SwapMetaIterator.html#a9c137bf2db9cad4ec5b23fcc49952f47">operator++</a>();</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaIterator.html#a76b1654353c86cf5653189862379644e">   42</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classStore_1_1SwapMetaIterator.html#a76b1654353c86cf5653189862379644e">operator ==</a>(<span class="keyword">const</span> <a class="code hl_class" href="classStore_1_1SwapMetaIterator.html">SwapMetaIterator</a> &amp;them)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classStore_1_1SwapMetaIterator.html#a0b386bdaad8d3a9f6e2d6878aa0373e8">fieldStart_</a> == them.<a class="code hl_variable" href="classStore_1_1SwapMetaIterator.html#a0b386bdaad8d3a9f6e2d6878aa0373e8">fieldStart_</a>; }</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaIterator.html#ac88d14a69ea6937ab4227ed81fdfd7f1">   43</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classStore_1_1SwapMetaIterator.html#ac88d14a69ea6937ab4227ed81fdfd7f1">operator !=</a>(<span class="keyword">const</span> <a class="code hl_class" href="classStore_1_1SwapMetaIterator.html">SwapMetaIterator</a> &amp;them)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == them); }</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classStore_1_1SwapMetaIterator.html#a4c06b65c3e5a41d59aa63ed72c3b45ce">sync</a>();</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaIterator.html#a0b386bdaad8d3a9f6e2d6878aa0373e8">   48</a></span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="classStore_1_1SwapMetaIterator.html#a0b386bdaad8d3a9f6e2d6878aa0373e8">fieldStart_</a>; </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaIterator.html#a74e6380f97439287f868afb47547fdc1">   49</a></span>    <span class="keyword">const</span> <span class="keywordtype">void</span> * <span class="keyword">const</span> <a class="code hl_variable" href="classStore_1_1SwapMetaIterator.html#a74e6380f97439287f868afb47547fdc1">bufEnd_</a>; </div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaIterator.html#a048105e11001608e0ed1bc5182e2495b">   50</a></span>    <a class="code hl_class" href="classStore_1_1SwapMetaView.html">SwapMetaView</a> <a class="code hl_variable" href="classStore_1_1SwapMetaIterator.html#a048105e11001608e0ed1bc5182e2495b">meta_</a>; </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>};</div>
</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="foldopen" id="foldopen00054" data-start="{" data-end="};">
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaUnpacker.html">   54</a></span><span class="keyword">class </span><a class="code hl_class" href="classStore_1_1SwapMetaUnpacker.html">SwapMetaUnpacker</a></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>{</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    <a class="code hl_class" href="classStore_1_1SwapMetaUnpacker.html">SwapMetaUnpacker</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *buf, ssize_t bufferLength, <span class="keywordtype">size_t</span> &amp;swap_hdr_sz);</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    <span class="comment">// for-range loop API for iterating over serialized swap metadata fields</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaUnpacker.html#a1273e9df75df59da9abcd0b36f30ce04">   60</a></span>    <span class="keyword">using </span><a class="code hl_class" href="classStore_1_1SwapMetaIterator.html">Iterator</a> = <a class="code hl_class" href="classStore_1_1SwapMetaIterator.html">SwapMetaIterator</a>;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaUnpacker.html#a4424d324db32449c22a892169c962130">   61</a></span>    <a class="code hl_class" href="classStore_1_1SwapMetaIterator.html">Iterator</a> <a class="code hl_function" href="classStore_1_1SwapMetaUnpacker.html#a4424d324db32449c22a892169c962130">cbegin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_typedef" href="classStore_1_1SwapMetaUnpacker.html#a1273e9df75df59da9abcd0b36f30ce04">Iterator</a>(<a class="code hl_variable" href="classStore_1_1SwapMetaUnpacker.html#afa65ad9861a8e2b55500604157a2b2bb">metas</a>, <a class="code hl_variable" href="classStore_1_1SwapMetaUnpacker.html#afa65ad9861a8e2b55500604157a2b2bb">metas</a> + <a class="code hl_variable" href="classStore_1_1SwapMetaUnpacker.html#a80122da53dec7fbe7eb3dae312fcefd7">metasSize</a>); }</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaUnpacker.html#a9fda8df59b9d0f3e336b89ecb2df9a33">   62</a></span>    <a class="code hl_class" href="classStore_1_1SwapMetaIterator.html">Iterator</a> <a class="code hl_function" href="classStore_1_1SwapMetaUnpacker.html#a9fda8df59b9d0f3e336b89ecb2df9a33">cend</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_typedef" href="classStore_1_1SwapMetaUnpacker.html#a1273e9df75df59da9abcd0b36f30ce04">Iterator</a>(<a class="code hl_variable" href="classStore_1_1SwapMetaUnpacker.html#afa65ad9861a8e2b55500604157a2b2bb">metas</a> + <a class="code hl_variable" href="classStore_1_1SwapMetaUnpacker.html#a80122da53dec7fbe7eb3dae312fcefd7">metasSize</a>, <a class="code hl_variable" href="classStore_1_1SwapMetaUnpacker.html#afa65ad9861a8e2b55500604157a2b2bb">metas</a> + <a class="code hl_variable" href="classStore_1_1SwapMetaUnpacker.html#a80122da53dec7fbe7eb3dae312fcefd7">metasSize</a>); }</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaUnpacker.html#a0e229335ef6b35cd1f72317286eb50db">   63</a></span>    <a class="code hl_class" href="classStore_1_1SwapMetaIterator.html">Iterator</a> <a class="code hl_function" href="classStore_1_1SwapMetaUnpacker.html#a0e229335ef6b35cd1f72317286eb50db">begin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_function" href="classStore_1_1SwapMetaUnpacker.html#a4424d324db32449c22a892169c962130">cbegin</a>(); }</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaUnpacker.html#aa16f6d564547c3a71cbbf38d3e110ef2">   64</a></span>    <a class="code hl_class" href="classStore_1_1SwapMetaIterator.html">Iterator</a> <a class="code hl_function" href="classStore_1_1SwapMetaUnpacker.html#aa16f6d564547c3a71cbbf38d3e110ef2">end</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_function" href="classStore_1_1SwapMetaUnpacker.html#a9fda8df59b9d0f3e336b89ecb2df9a33">cend</a>(); }</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span> </div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaUnpacker.html#afa65ad9861a8e2b55500604157a2b2bb">   67</a></span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="classStore_1_1SwapMetaUnpacker.html#afa65ad9861a8e2b55500604157a2b2bb">metas</a>; </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaUnpacker.html#a80122da53dec7fbe7eb3dae312fcefd7">   68</a></span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="classStore_1_1SwapMetaUnpacker.html#a80122da53dec7fbe7eb3dae312fcefd7">metasSize</a>; </div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>};</div>
</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="foldopen" id="foldopen00073" data-start="{" data-end="}">
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno"><a class="line" href="namespaceStore.html#ab8809ac7d8cd83493682c04de6613641">   73</a></span><a class="code hl_function" href="namespaceStore.html#ab8809ac7d8cd83493682c04de6613641">CheckSwapMetaKey</a>(<span class="keyword">const</span> <a class="code hl_class" href="classStore_1_1SwapMetaView.html">SwapMetaView</a> &amp;meta, <span class="keyword">const</span> <a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;entry)</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>{</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    <a class="code hl_define" href="Assure_8h.html#a1fcca4cd6cfc3b9f835aa3652eb0c2f5">Assure</a>(meta.<a class="code hl_variable" href="classStore_1_1SwapMetaView.html#a1f0739c493cf4d2c7d6d61cdea2b86c8">type</a> == <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a947710a924fe192550953bdd1f478a0b">STORE_META_KEY_MD5</a>);</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    meta.<a class="code hl_function" href="classStore_1_1SwapMetaView.html#a11af5126af0ba39c1c8a072184990b26">checkExpectedLength</a>(<a class="code hl_define" href="md5_8h.html#a798438dc0194720c48b82a27ca9af05a">SQUID_MD5_DIGEST_LENGTH</a>);</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span> </div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="defines_8h.html#ac1f8e975d5c9f901f8ec9f29db1aca92">EBIT_TEST</a>(entry.<a class="code hl_variable" href="classStoreEntry.html#a15b61bc1167a3670130a81bc5eca9f16">flags</a>, <a class="code hl_enumvalue" href="enums_8h.html#a16685eea158879e41b101ca3634de462a6e99a1b0a211e1f4d482be594fe0e19f">KEY_PRIVATE</a>) &amp;&amp;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>            memcmp(meta.<a class="code hl_variable" href="classStore_1_1SwapMetaView.html#a8ac41d45f6c678d25fc7ab6b599727fa">rawValue</a>, entry.<a class="code hl_variable" href="classhash__link.html#ae8c6b512f09a15a32ce953deb2e58ffb">key</a>, <a class="code hl_define" href="md5_8h.html#a798438dc0194720c48b82a27ca9af05a">SQUID_MD5_DIGEST_LENGTH</a>) != 0) {</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span> </div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        <a class="code hl_define" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>(20, 2, <span class="stringliteral">&quot;stored key mismatches &quot;</span> &lt;&lt; entry.<a class="code hl_function" href="classStoreEntry.html#a88e8fcd41e9d2d0c24ea68daa9a4eb57">getMD5Text</a>());</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span> </div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>        <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> md5_mismatches = 0;</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="int_8cc.html#a447b20e752a00e512f1ead308f55db38">isPowTen</a>(++md5_mismatches))</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>            <a class="code hl_define" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>(20, <a class="code hl_define" href="debug_2Stream_8h.html#ad1f6f001d275799243ee96d0b1519d3a">DBG_IMPORTANT</a>, <span class="stringliteral">&quot;WARNING: &quot;</span> &lt;&lt; md5_mismatches &lt;&lt; <span class="stringliteral">&quot; swapin MD5 mismatches&quot;</span>);</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>        <span class="comment">// TODO: Support TextException::frequent = isPowTen(++md5_mismatches)</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>        <span class="comment">// to suppress reporting, achieving the same effect as above</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="classTextException.html">TextException</a>(<span class="stringliteral">&quot;swap meta MD5 mismatch&quot;</span>, <a class="code hl_define" href="Here_8h.html#ae4d205e9d525856fbdfd44f7eccb309b">Here</a>());</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    }</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>}</div>
</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span> </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="foldopen" id="foldopen00095" data-start="{" data-end="}">
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno"><a class="line" href="namespaceStore.html#a314d45544a069dc910040e4619a424cc">   95</a></span><a class="code hl_function" href="namespaceStore.html#a314d45544a069dc910040e4619a424cc">UnpackSwapMetaKey</a>(<span class="keyword">const</span> <a class="code hl_class" href="classStore_1_1SwapMetaView.html">SwapMetaView</a> &amp;meta, <a class="code hl_typedef" href="store_2forward_8h.html#ab1424e1b13666cc28f4c5cb05f8c8305">cache_key</a> *key)</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>{</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <a class="code hl_define" href="Assure_8h.html#a1fcca4cd6cfc3b9f835aa3652eb0c2f5">Assure</a>(meta.<a class="code hl_variable" href="classStore_1_1SwapMetaView.html#a1f0739c493cf4d2c7d6d61cdea2b86c8">type</a> == <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a947710a924fe192550953bdd1f478a0b">STORE_META_KEY_MD5</a>);</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    meta.<a class="code hl_function" href="classStore_1_1SwapMetaView.html#a11af5126af0ba39c1c8a072184990b26">checkExpectedLength</a>(<a class="code hl_define" href="md5_8h.html#a798438dc0194720c48b82a27ca9af05a">SQUID_MD5_DIGEST_LENGTH</a>);</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    <a class="code hl_define" href="Assure_8h.html#a1fcca4cd6cfc3b9f835aa3652eb0c2f5">Assure</a>(key);</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    memcpy(key, meta.<a class="code hl_variable" href="classStore_1_1SwapMetaView.html#a8ac41d45f6c678d25fc7ab6b599727fa">rawValue</a>, <a class="code hl_define" href="md5_8h.html#a798438dc0194720c48b82a27ca9af05a">SQUID_MD5_DIGEST_LENGTH</a>);</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>}</div>
</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="foldopen" id="foldopen00105" data-start="{" data-end="}">
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno"><a class="line" href="namespaceStore.html#ae3be008f24b1fb00060c2887cf6d5156">  105</a></span><a class="code hl_function" href="namespaceStore.html#ae3be008f24b1fb00060c2887cf6d5156">CheckSwapMetaUrl</a>(<span class="keyword">const</span> <a class="code hl_class" href="classStore_1_1SwapMetaView.html">SwapMetaView</a> &amp;meta, <span class="keyword">const</span> <a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;entry)</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>{</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    <a class="code hl_define" href="Assure_8h.html#a1fcca4cd6cfc3b9f835aa3652eb0c2f5">Assure</a>(meta.<a class="code hl_variable" href="classStore_1_1SwapMetaView.html#a1f0739c493cf4d2c7d6d61cdea2b86c8">type</a> == <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a34961af3f7efadb258692204695b242b">STORE_META_URL</a>);</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span> </div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <span class="comment">// PackSwapMeta() terminates; strcasecmp() and reporting below rely on that</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="memrchr_8cc.html#a256d9438f9a762d8b0052eb57a85b0cf">memrchr</a>(meta.<a class="code hl_variable" href="classStore_1_1SwapMetaView.html#a8ac41d45f6c678d25fc7ab6b599727fa">rawValue</a>, <span class="charliteral">&#39;\0&#39;</span>, meta.<a class="code hl_variable" href="classStore_1_1SwapMetaView.html#a1a53b5736e7d1b05f71512ed0126008e">rawLength</a>))</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="classTextException.html">TextException</a>(<span class="stringliteral">&quot;unterminated URI or bad URI length&quot;</span>, <a class="code hl_define" href="Here_8h.html#ae4d205e9d525856fbdfd44f7eccb309b">Here</a>());</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;emem = entry.<a class="code hl_function" href="classStoreEntry.html#a19fd5af89e99c467c29f7bd951ac901d">mem</a>();</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span> </div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <span class="keywordflow">if</span> (!emem.hasUris())</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>        <span class="keywordflow">return</span>; <span class="comment">// cannot validate</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span> </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <span class="keyword">const</span> <span class="keyword">auto</span> storedUrl = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(meta.<a class="code hl_variable" href="classStore_1_1SwapMetaView.html#a8ac41d45f6c678d25fc7ab6b599727fa">rawValue</a>);</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <span class="comment">// XXX: ensure all Squid URL inputs are properly normalized then use case-sensitive compare here</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <span class="keywordflow">if</span> (strcasecmp(emem.urlXXX(), storedUrl) != 0) {</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>        <a class="code hl_define" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>(20, <a class="code hl_define" href="debug_2Stream_8h.html#ad1f6f001d275799243ee96d0b1519d3a">DBG_IMPORTANT</a>, <span class="stringliteral">&quot;WARNING: URL mismatch when loading a cached entry:&quot;</span> &lt;&lt;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>               <a class="code hl_function" href="classDebug.html#a469eccf6573cacd9bc0682d3fc0eaf11">Debug::Extra</a> &lt;&lt; <span class="stringliteral">&quot;expected: &quot;</span> &lt;&lt; emem.urlXXX() &lt;&lt;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>               <a class="code hl_function" href="classDebug.html#a469eccf6573cacd9bc0682d3fc0eaf11">Debug::Extra</a> &lt;&lt; <span class="stringliteral">&quot;found:    &quot;</span> &lt;&lt; storedUrl);</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="classTextException.html">TextException</a>(<span class="stringliteral">&quot;URL mismatch&quot;</span>, <a class="code hl_define" href="Here_8h.html#ae4d205e9d525856fbdfd44f7eccb309b">Here</a>());</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    }</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>}</div>
</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span><span class="keyword">static</span> <a class="code hl_class" href="classSBuf.html">SBuf</a></div>
<div class="foldopen" id="foldopen00130" data-start="{" data-end="}">
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno"><a class="line" href="namespaceStore.html#ac79e6fc2ad4dd43b112eca047d40e47c">  130</a></span><a class="code hl_function" href="namespaceStore.html#ac79e6fc2ad4dd43b112eca047d40e47c">UnpackNewSwapMetaVaryHeaders</a>(<span class="keyword">const</span> <a class="code hl_class" href="classStore_1_1SwapMetaView.html">SwapMetaView</a> &amp;meta, <span class="keyword">const</span> <a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;entry)</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>{</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <a class="code hl_define" href="Assure_8h.html#a1fcca4cd6cfc3b9f835aa3652eb0c2f5">Assure</a>(meta.<a class="code hl_variable" href="classStore_1_1SwapMetaView.html#a1f0739c493cf4d2c7d6d61cdea2b86c8">type</a> == <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a44fa5b00bdf95e6fa7af4bad03e3d0c8">STORE_META_VARY_HEADERS</a>);</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <a class="code hl_class" href="classSBuf.html">SBuf</a> rawVary(<span class="keyword">static_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(meta.<a class="code hl_variable" href="classStore_1_1SwapMetaView.html#a8ac41d45f6c678d25fc7ab6b599727fa">rawValue</a>), meta.<a class="code hl_variable" href="classStore_1_1SwapMetaView.html#a1a53b5736e7d1b05f71512ed0126008e">rawLength</a>);</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <span class="comment">// entries created before SBuf-based Vary may include string terminator</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classSBuf.html">SBuf</a> nul(<span class="stringliteral">&quot;\0&quot;</span>, 1);</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    rawVary.<a class="code hl_function" href="classSBuf.html#a6f56e99bef653fef295096b7fc04be99">trim</a>(nul, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;knownVary = entry.<a class="code hl_function" href="classStoreEntry.html#a19fd5af89e99c467c29f7bd951ac901d">mem</a>().<a class="code hl_variable" href="classMemObject.html#a66e95211cec7250b591bd1eaf9fe4f08">vary_headers</a>;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <span class="keywordflow">if</span> (knownVary.isEmpty())</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        <span class="keywordflow">return</span> rawVary; <span class="comment">// new Vary (that we cannot validate)</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span> </div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <span class="keywordflow">if</span> (knownVary == rawVary)</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>        <span class="keywordflow">return</span> <a class="code hl_class" href="classSBuf.html">SBuf</a>(); <span class="comment">// OK: no new Vary</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="classTextException.html">TextException</a>(<span class="stringliteral">&quot;Vary mismatch&quot;</span>, <a class="code hl_define" href="Here_8h.html#ae4d205e9d525856fbdfd44f7eccb309b">Here</a>());</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>}</div>
</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span><span class="keyword">static</span> <span class="keywordtype">size_t</span></div>
<div class="foldopen" id="foldopen00151" data-start="{" data-end="}">
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno"><a class="line" href="namespaceStore.html#ad5a1edbed1904633b906d85eed526acd">  151</a></span><a class="code hl_function" href="namespaceStore.html#ad5a1edbed1904633b906d85eed526acd">UnpackPrefix</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> buf, <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code hl_variable" href="ModDevPoll_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>{</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <a class="code hl_define" href="Assure_8h.html#a1fcca4cd6cfc3b9f835aa3652eb0c2f5">Assure</a>(buf);</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    <span class="keyword">auto</span> input = buf;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <span class="keyword">const</span> <span class="keyword">auto</span> end = buf + <a class="code hl_variable" href="ModDevPoll_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>;</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span> </div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <span class="keywordtype">char</span> magic = 0;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    <a class="code hl_function" href="namespaceStore.html#a1fd2c6e1b5fa5b8c47c9adac4b561dbe">SwapMetaExtract</a>(magic, input, end);</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span> </div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    <span class="keywordflow">if</span> (magic != <a class="code hl_variable" href="namespaceStore.html#acc47c7124b06c47960aff04bc1fdeae4">SwapMetaMagic</a>)</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="classTextException.html">TextException</a>(<span class="stringliteral">&quot;store entry metadata prefix is corrupted&quot;</span>, <a class="code hl_define" href="Here_8h.html#ae4d205e9d525856fbdfd44f7eccb309b">Here</a>());</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <a class="code hl_typedef" href="namespaceStore.html#af47e8491b1f49e1aefc488dbf042bea1">RawSwapMetaPrefixLength</a> rawMetaSize = 0; <span class="comment">// metadata size, including the required prefix</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    <a class="code hl_function" href="namespaceStore.html#a1fd2c6e1b5fa5b8c47c9adac4b561dbe">SwapMetaExtract</a>(rawMetaSize, input, end);</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="SquidMath_8h.html#ae851012a120157350a79dbdd4e9d87fd">Less</a>(rawMetaSize, <a class="code hl_variable" href="namespaceStore.html#a0f118a9d749fa2baef3a054dbbdfd321">SwapMetaPrefixSize</a>))</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="classTextException.html">TextException</a>(<span class="stringliteral">&quot;store entry metadata length is corrupted&quot;</span>, <a class="code hl_define" href="Here_8h.html#ae4d205e9d525856fbdfd44f7eccb309b">Here</a>());</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span> </div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <span class="keywordflow">return</span> rawMetaSize; <span class="comment">// now safe to use within (buf, buf+size)</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>}</div>
</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span> </div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>} <span class="comment">// namespace Store</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span><span class="comment">/* Store::SwapMetaIterator */</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span> </div>
<div class="foldopen" id="foldopen00176" data-start="{" data-end="}">
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaIterator.html#abf4ae07b30a6e2630cb1211f7d352926">  176</a></span><a class="code hl_function" href="classStore_1_1SwapMetaIterator.html#abf4ae07b30a6e2630cb1211f7d352926">Store::SwapMetaIterator::SwapMetaIterator</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> * <span class="keyword">const</span> start, <span class="keyword">const</span> <span class="keywordtype">void</span> * <span class="keyword">const</span> end):</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    fieldStart_(static_cast&lt;const char*&gt;(start)),</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    bufEnd_(end)</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>{</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    <a class="code hl_function" href="classStore_1_1SwapMetaIterator.html#a4c06b65c3e5a41d59aa63ed72c3b45ce">sync</a>();</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>}</div>
</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span><a class="code hl_class" href="classStore_1_1SwapMetaIterator.html">Store::SwapMetaIterator</a> &amp;</div>
<div class="foldopen" id="foldopen00184" data-start="{" data-end="}">
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaIterator.html#a9c137bf2db9cad4ec5b23fcc49952f47">  184</a></span><a class="code hl_function" href="classStore_1_1SwapMetaIterator.html#a9c137bf2db9cad4ec5b23fcc49952f47">Store::SwapMetaIterator::operator++</a>()</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>{</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    <a class="code hl_define" href="Assure_8h.html#a1fcca4cd6cfc3b9f835aa3652eb0c2f5">Assure</a>(fieldStart_ != bufEnd_);</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    fieldStart_ += <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="namespaceStore.html#a34f71f7cce9cdd696b0760c38395a0e1">RawSwapMetaType</a>); <span class="comment">// swap meta type</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    fieldStart_ += <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="namespaceStore.html#a339f6ed2fcc2dc68136898c171c34558">RawSwapMetaLength</a>); <span class="comment">// swap meta value length</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    fieldStart_ += meta_.rawLength; <span class="comment">// swap meta value</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span> </div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    sync();</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>}</div>
</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span> </div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span><span class="keywordtype">void</span></div>
<div class="foldopen" id="foldopen00197" data-start="{" data-end="}">
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaIterator.html#a4c06b65c3e5a41d59aa63ed72c3b45ce">  197</a></span><a class="code hl_function" href="classStore_1_1SwapMetaIterator.html#a4c06b65c3e5a41d59aa63ed72c3b45ce">Store::SwapMetaIterator::sync</a>()</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>{</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>    <span class="keywordflow">if</span> (fieldStart_ == bufEnd_)</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>        <span class="keywordflow">return</span>; <span class="comment">// nothing to do when we reach the end of iteration</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span> </div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    <span class="comment">// We cannot start beyond the end of the header: We start with valid</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    <span class="comment">// begin/end buffer pointers, and each field checks for overreach.</span></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>    <a class="code hl_define" href="Assure_8h.html#a1fcca4cd6cfc3b9f835aa3652eb0c2f5">Assure</a>(fieldStart_ &lt; bufEnd_);</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span> </div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    meta_ = <a class="code hl_class" href="classStore_1_1SwapMetaView.html">SwapMetaView</a>(fieldStart_, bufEnd_);</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>}</div>
</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span> </div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span><span class="comment">/* Store::SwapMetaUnpacker */</span></div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span> </div>
<div class="foldopen" id="foldopen00211" data-start="{" data-end="}">
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno"><a class="line" href="classStore_1_1SwapMetaUnpacker.html#a2afb19f331d90c1903cf7d90dd309334">  211</a></span><a class="code hl_function" href="classStore_1_1SwapMetaUnpacker.html#a2afb19f331d90c1903cf7d90dd309334">Store::SwapMetaUnpacker::SwapMetaUnpacker</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> buf, <span class="keyword">const</span> ssize_t <a class="code hl_variable" href="ModDevPoll_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, <span class="keywordtype">size_t</span> &amp;swap_hdr_sz)</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>{</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    <a class="code hl_define" href="Assure_8h.html#a1fcca4cd6cfc3b9f835aa3652eb0c2f5">Assure</a>(buf);</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    <a class="code hl_define" href="Assure_8h.html#a1fcca4cd6cfc3b9f835aa3652eb0c2f5">Assure</a>(<a class="code hl_variable" href="ModDevPoll_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a> &gt;= 0);</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span> </div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    <span class="keyword">const</span> <span class="keyword">auto</span> headerSize = <a class="code hl_function" href="namespaceStore.html#ad5a1edbed1904633b906d85eed526acd">UnpackPrefix</a>(buf, <a class="code hl_variable" href="ModDevPoll_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>);</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    <span class="comment">// We assume the caller supplied a reasonable-size buffer. If our assumption</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    <span class="comment">// is wrong, then this is a Squid bug rather than input validation failure.</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="SquidMath_8h.html#ae851012a120157350a79dbdd4e9d87fd">Less</a>(<a class="code hl_variable" href="ModDevPoll_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, headerSize)) {</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="classTextException.html">TextException</a>(<a class="code hl_function" href="sbuf_2Stream_8h.html#a6160c2bd5c3883a54866ccfd670ce4b6">ToSBuf</a>(<span class="stringliteral">&quot;store entry metadata is too big&quot;</span>,</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>                                   <a class="code hl_function" href="classDebug.html#a469eccf6573cacd9bc0682d3fc0eaf11">Debug::Extra</a>, <span class="stringliteral">&quot;buffer size: &quot;</span>, <a class="code hl_variable" href="ModDevPoll_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>,</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>                                   <a class="code hl_function" href="classDebug.html#a469eccf6573cacd9bc0682d3fc0eaf11">Debug::Extra</a>, <span class="stringliteral">&quot;metadata size: &quot;</span>, headerSize),</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>                            <a class="code hl_define" href="Here_8h.html#ae4d205e9d525856fbdfd44f7eccb309b">Here</a>());</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    }</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span> </div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    <a class="code hl_define" href="Assure_8h.html#aa3ac7627281eadedbc4e648db0bb64c2">Assure2</a>(headerSize &gt;= <a class="code hl_variable" href="namespaceStore.html#a0f118a9d749fa2baef3a054dbbdfd321">SwapMetaPrefixSize</a>, <span class="stringliteral">&quot;UnpackPrefix() validates metadata length&quot;</span>);</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    metasSize = headerSize - <a class="code hl_variable" href="namespaceStore.html#a0f118a9d749fa2baef3a054dbbdfd321">SwapMetaPrefixSize</a>;</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span> </div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    metas = buf + <a class="code hl_variable" href="namespaceStore.html#a0f118a9d749fa2baef3a054dbbdfd321">SwapMetaPrefixSize</a>; <span class="comment">// skip prefix</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    <a class="code hl_define" href="Assure_8h.html#a1fcca4cd6cfc3b9f835aa3652eb0c2f5">Assure</a>(metas + metasSize &lt;= buf + <a class="code hl_variable" href="ModDevPoll_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>); <span class="comment">// paranoid</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span> </div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    swap_hdr_sz = headerSize;</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>}</div>
</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span> </div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span><span class="keywordtype">size_t</span></div>
<div class="foldopen" id="foldopen00237" data-start="{" data-end="}">
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno"><a class="line" href="namespaceStore.html#a3b2cb71614ece155c8c83d5bf34aea94">  237</a></span><a class="code hl_function" href="namespaceStore.html#a3b2cb71614ece155c8c83d5bf34aea94">Store::UnpackSwapMetaSize</a>(<span class="keyword">const</span> <a class="code hl_class" href="classSBuf.html">SBuf</a> &amp;buf)</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>{</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespaceStore.html#ad5a1edbed1904633b906d85eed526acd">UnpackPrefix</a>(buf.<a class="code hl_function" href="classSBuf.html#a1af20d84cdd1e4f380c74a08d67d0edb">rawContent</a>(), buf.<a class="code hl_function" href="classSBuf.html#a4fdfe954309aa6da19240f11a8f6b583">length</a>());</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>}</div>
</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span> </div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span><span class="keywordtype">size_t</span></div>
<div class="foldopen" id="foldopen00243" data-start="{" data-end="}">
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno"><a class="line" href="namespaceStore.html#a426ca6018ae7cfd360949012febb3e00">  243</a></span><a class="code hl_function" href="namespaceStore.html#a426ca6018ae7cfd360949012febb3e00">Store::UnpackIndexSwapMeta</a>(<span class="keyword">const</span> <a class="code hl_class" href="classMemBuf.html">MemBuf</a> &amp;buf, <a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;tmpe, <a class="code hl_typedef" href="store_2forward_8h.html#ab1424e1b13666cc28f4c5cb05f8c8305">cache_key</a> * <span class="keyword">const</span> key)</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>{</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>    <span class="keywordtype">size_t</span> swap_hdr_sz = 0;</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span> </div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    <span class="keyword">const</span> <a class="code hl_class" href="classStore_1_1SwapMetaUnpacker.html">SwapMetaUnpacker</a> metaFields(buf.<a class="code hl_function" href="classMemBuf.html#a7a189b679e374a2cca1d01f9ba4e195f">content</a>(), buf.<a class="code hl_function" href="classMemBuf.html#aaaf0cc30487417b07680613bcf518dca">contentSize</a>(), swap_hdr_sz);</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;meta: metaFields) {</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>        <span class="keywordflow">switch</span> (meta.type) {</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347afe8989f73b872204e64e7390ab8d4837">STORE_META_VOID</a>:</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>            <span class="comment">// this meta.type is the unpacking code signal that it took care of this field</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span> </div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a947710a924fe192550953bdd1f478a0b">STORE_META_KEY_MD5</a>:</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>            <span class="comment">// Optimization: We could postpone setting the caller&#39;s key</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>            <span class="comment">// until all fields are parsed, but that would require copying</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>            <span class="comment">// it. Instead, we treat key and tmpe.key as storage that can be</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>            <span class="comment">// safely altered even on parsing failures. This function</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>            <span class="comment">// description tells the callers that we may do that.</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>            <a class="code hl_function" href="namespaceStore.html#a314d45544a069dc910040e4619a424cc">UnpackSwapMetaKey</a>(meta, key);</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>            <a class="code hl_define" href="Assure_8h.html#a1fcca4cd6cfc3b9f835aa3652eb0c2f5">Assure</a>(key);</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>            tmpe.<a class="code hl_variable" href="classhash__link.html#ae8c6b512f09a15a32ce953deb2e58ffb">key</a> = key;</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span> </div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347aca1ab5eee80a1896bfcf484671be64b6">STORE_META_STD</a>: {</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>            <span class="comment">// TODO: Remove. Since old_metahdr&#39;s members may have different</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>            <span class="comment">// sizes on different platforms, we cannot guarantee that serialized</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>            <span class="comment">// types in the being-loaded old cache are the same as these types.</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>            meta.checkExpectedLength(<a class="code hl_variable" href="namespaceStore.html#acfd21bd40bfd87d8c4edba8804b5cbb9">STORE_HDR_METASIZE_OLD</a>);</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>            <span class="keyword">struct </span>old_metahdr {</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>                <span class="comment">// XXX: All serialized members must have fixed-size types.</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>                time_t timestamp;</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>                time_t lastref;</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>                time_t expires;</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>                time_t lastmod;</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>                <span class="keywordtype">size_t</span> swap_file_sz;</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>                uint16_t refcount;</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>                uint16_t flags;</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>            };</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>            <span class="keyword">static_assert</span>(offsetof(old_metahdr, flags) + <span class="keyword">sizeof</span>(old_metahdr::flags) == <a class="code hl_variable" href="namespaceStore.html#acfd21bd40bfd87d8c4edba8804b5cbb9">STORE_HDR_METASIZE_OLD</a>, <span class="stringliteral">&quot;we reproduced old swap meta basics format&quot;</span>);</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>            <span class="keyword">auto</span> basics = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>old_metahdr*<span class="keyword">&gt;</span>(meta.rawValue);</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>            tmpe.<a class="code hl_variable" href="classStoreEntry.html#a5880b874fdaa8aa76b21a5fedd609ca0">timestamp</a> = basics-&gt;timestamp;</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>            tmpe.<a class="code hl_variable" href="classStoreEntry.html#ade76832635a65f3a2e0fc70347b533c8">lastref</a> = basics-&gt;lastref;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>            tmpe.<a class="code hl_variable" href="classStoreEntry.html#a42dc938e1e2a49b3d4275eabeb8eb699">expires</a> = basics-&gt;expires;</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>            tmpe.<a class="code hl_function" href="classStoreEntry.html#a4550da0757f7c3aa6af8e8e9c3bcdb48">lastModified</a>(basics-&gt;lastmod);</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>            tmpe.<a class="code hl_variable" href="classStoreEntry.html#af3c8d494db0f2f861a64ad4b7e6a0452">swap_file_sz</a> = basics-&gt;swap_file_sz;</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>            tmpe.<a class="code hl_variable" href="classStoreEntry.html#af3f6238d5f1ab68dc63d6f70d41e5e4b">refcount</a> = basics-&gt;refcount;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>            tmpe.<a class="code hl_variable" href="classStoreEntry.html#a15b61bc1167a3670130a81bc5eca9f16">flags</a> = basics-&gt;flags;</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>        }</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347accc6e241d611350cdc112d6c4a1a0b31">STORE_META_STD_LFS</a>:</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>            meta.checkExpectedLength(<a class="code hl_variable" href="namespaceStore.html#adee9396b3f2162b09018517703f86eb9">STORE_HDR_METASIZE</a>);</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>            memcpy(&amp;tmpe.<a class="code hl_variable" href="classStoreEntry.html#a5880b874fdaa8aa76b21a5fedd609ca0">timestamp</a>, meta.rawValue, <a class="code hl_variable" href="namespaceStore.html#adee9396b3f2162b09018517703f86eb9">STORE_HDR_METASIZE</a>);</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span> </div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a34961af3f7efadb258692204695b242b">STORE_META_URL</a>:</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a44fa5b00bdf95e6fa7af4bad03e3d0c8">STORE_META_VARY_HEADERS</a>:</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a5fbdbb52de736b957dbbd0b154f0b017">STORE_META_OBJSIZE</a>:</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>            <span class="comment">// We do not load this information at cache index rebuild time;</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>            <span class="comment">// UnpackHitSwapMeta() handles these MemObject fields.</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        }</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    }</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span> </div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    <span class="keywordflow">return</span> swap_hdr_sz;</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>}</div>
</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span><span class="keywordtype">void</span></div>
<div class="foldopen" id="foldopen00310" data-start="{" data-end="}">
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno"><a class="line" href="namespaceStore.html#a3d87686582d884e61bf470762f516cf1">  310</a></span><a class="code hl_function" href="namespaceStore.html#a3d87686582d884e61bf470762f516cf1">Store::UnpackHitSwapMeta</a>(<span class="keywordtype">char</span> <span class="keyword">const</span> * <span class="keyword">const</span> buf, <span class="keyword">const</span> ssize_t len, <a class="code hl_class" href="classStoreEntry.html">StoreEntry</a> &amp;entry)</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>{</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    <a class="code hl_define" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>(90, 7, entry &lt;&lt; <span class="stringliteral">&quot; buf len: &quot;</span> &lt;&lt; len);</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    <a class="code hl_define" href="assert_8h.html#a33fa45e42155e69ce8d0da0fd978b351">assert</a>(len &gt;= 0);</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span> </div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    <span class="keywordtype">size_t</span> swap_hdr_sz = 0;</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>    <a class="code hl_class" href="classSBuf.html">SBuf</a> varyHeaders;</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span> </div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    <span class="keyword">const</span> <a class="code hl_class" href="classStore_1_1SwapMetaUnpacker.html">SwapMetaUnpacker</a> metaFields(buf, len, swap_hdr_sz);</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;meta: metaFields) {</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        <span class="keywordflow">switch</span> (meta.type) {</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347afe8989f73b872204e64e7390ab8d4837">STORE_META_VOID</a>:</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>            <span class="comment">// this meta.type is the unpacking code signal that it took care of the field</span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span> </div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a34961af3f7efadb258692204695b242b">STORE_META_URL</a>:</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>            <a class="code hl_function" href="namespaceStore.html#ae3be008f24b1fb00060c2887cf6d5156">CheckSwapMetaUrl</a>(meta, entry);</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span> </div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a44fa5b00bdf95e6fa7af4bad03e3d0c8">STORE_META_VARY_HEADERS</a>:</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>            varyHeaders = <a class="code hl_function" href="namespaceStore.html#ac79e6fc2ad4dd43b112eca047d40e47c">UnpackNewSwapMetaVaryHeaders</a>(meta, entry);</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span> </div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a5fbdbb52de736b957dbbd0b154f0b017">STORE_META_OBJSIZE</a>:</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>            <span class="comment">// XXX: We swap out but never use this field; set emem.object_sz?</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span> </div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a947710a924fe192550953bdd1f478a0b">STORE_META_KEY_MD5</a>:</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>            <span class="comment">// already handled by UnpackIndexSwapMeta()</span></div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>            <a class="code hl_function" href="namespaceStore.html#ab8809ac7d8cd83493682c04de6613641">CheckSwapMetaKey</a>(meta, entry); <span class="comment">// paranoid</span></div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span> </div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347aca1ab5eee80a1896bfcf484671be64b6">STORE_META_STD</a>:</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347accc6e241d611350cdc112d6c4a1a0b31">STORE_META_STD_LFS</a>:</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>            <span class="comment">// already handled by UnpackIndexSwapMeta()</span></div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>        }</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    }</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span> </div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    <span class="keyword">auto</span> &amp;emem = entry.<a class="code hl_function" href="classStoreEntry.html#a19fd5af89e99c467c29f7bd951ac901d">mem</a>();</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    emem.<a class="code hl_variable" href="classMemObject.html#abf57cb8cfe4db5b2d6ee8c4e943e0fd3">swap_hdr_sz</a> = swap_hdr_sz;</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    <span class="keywordflow">if</span> (entry.<a class="code hl_variable" href="classStoreEntry.html#af3c8d494db0f2f861a64ad4b7e6a0452">swap_file_sz</a> &gt; 0) { <span class="comment">// collapsed hits may not know swap_file_sz</span></div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>        <a class="code hl_define" href="Assure_8h.html#a1fcca4cd6cfc3b9f835aa3652eb0c2f5">Assure</a>(entry.<a class="code hl_variable" href="classStoreEntry.html#af3c8d494db0f2f861a64ad4b7e6a0452">swap_file_sz</a> &gt;= swap_hdr_sz);</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>        emem.object_sz = entry.<a class="code hl_variable" href="classStoreEntry.html#af3c8d494db0f2f861a64ad4b7e6a0452">swap_file_sz</a> - swap_hdr_sz;</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    }</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    <a class="code hl_define" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>(90, 5, <span class="stringliteral">&quot;swap_file_sz=&quot;</span> &lt;&lt; entry.<a class="code hl_variable" href="classStoreEntry.html#af3c8d494db0f2f861a64ad4b7e6a0452">swap_file_sz</a> &lt;&lt;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>           <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; swap_hdr_sz &lt;&lt; <span class="stringliteral">&quot; + &quot;</span> &lt;&lt; emem.object_sz &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span> </div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    <span class="keywordflow">if</span> (!varyHeaders.<a class="code hl_function" href="classSBuf.html#a8bda8fe69e451e61946b35c2a2d2340b">isEmpty</a>())</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        emem.vary_headers = varyHeaders;</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>}</div>
</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span> </div>
<div class="ttc" id="aAssure_8h_html_a1fcca4cd6cfc3b9f835aa3652eb0c2f5"><div class="ttname"><a href="Assure_8h.html#a1fcca4cd6cfc3b9f835aa3652eb0c2f5">Assure</a></div><div class="ttdeci">#define Assure(condition)</div><div class="ttdef"><b>Definition</b> <a href="Assure_8h_source.html#l00035">Assure.h:35</a></div></div>
<div class="ttc" id="aAssure_8h_html_aa3ac7627281eadedbc4e648db0bb64c2"><div class="ttname"><a href="Assure_8h.html#aa3ac7627281eadedbc4e648db0bb64c2">Assure2</a></div><div class="ttdeci">#define Assure2(condition, description)</div><div class="ttdef"><b>Definition</b> <a href="Assure_8h_source.html#l00040">Assure.h:40</a></div></div>
<div class="ttc" id="aHere_8h_html_ae4d205e9d525856fbdfd44f7eccb309b"><div class="ttname"><a href="Here_8h.html#ae4d205e9d525856fbdfd44f7eccb309b">Here</a></div><div class="ttdeci">#define Here()</div><div class="ttdoc">source code location of the caller</div><div class="ttdef"><b>Definition</b> <a href="Here_8h_source.html#l00015">Here.h:15</a></div></div>
<div class="ttc" id="aMemObject_8h_html"><div class="ttname"><a href="MemObject_8h.html">MemObject.h</a></div></div>
<div class="ttc" id="aModDevPoll_8cc_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="ModDevPoll_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition</b> <a href="ModDevPoll_8cc_source.html#l00070">ModDevPoll.cc:70</a></div></div>
<div class="ttc" id="aRaw_8h_html"><div class="ttname"><a href="Raw_8h.html">Raw.h</a></div></div>
<div class="ttc" id="aSBuf_8h_html"><div class="ttname"><a href="SBuf_8h.html">SBuf.h</a></div></div>
<div class="ttc" id="aSquidMath_8h_html"><div class="ttname"><a href="SquidMath_8h.html">SquidMath.h</a></div></div>
<div class="ttc" id="aSquidMath_8h_html_ae851012a120157350a79dbdd4e9d87fd"><div class="ttname"><a href="SquidMath_8h.html#ae851012a120157350a79dbdd4e9d87fd">Less</a></div><div class="ttdeci">constexpr bool Less(const A a, const B b)</div><div class="ttdoc">whether integer a is less than integer b, with correct overflow handling</div><div class="ttdef"><b>Definition</b> <a href="SquidMath_8h_source.html#l00048">SquidMath.h:48</a></div></div>
<div class="ttc" id="aStore_8h_html"><div class="ttname"><a href="Store_8h.html">Store.h</a></div></div>
<div class="ttc" id="aSwapMetaIn_8h_html"><div class="ttname"><a href="SwapMetaIn_8h.html">SwapMetaIn.h</a></div></div>
<div class="ttc" id="aSwapMetaView_8h_html"><div class="ttname"><a href="SwapMetaView_8h.html">SwapMetaView.h</a></div></div>
<div class="ttc" id="aSwapMeta_8h_html"><div class="ttname"><a href="SwapMeta_8h.html">SwapMeta.h</a></div></div>
<div class="ttc" id="aTextException_8h_html"><div class="ttname"><a href="TextException_8h.html">TextException.h</a></div></div>
<div class="ttc" id="aassert_8h_html_a33fa45e42155e69ce8d0da0fd978b351"><div class="ttname"><a href="assert_8h.html#a33fa45e42155e69ce8d0da0fd978b351">assert</a></div><div class="ttdeci">#define assert(EX)</div><div class="ttdef"><b>Definition</b> <a href="assert_8h_source.html#l00017">assert.h:17</a></div></div>
<div class="ttc" id="aclassDebug_html_a469eccf6573cacd9bc0682d3fc0eaf11"><div class="ttname"><a href="classDebug.html#a469eccf6573cacd9bc0682d3fc0eaf11">Debug::Extra</a></div><div class="ttdeci">static std::ostream &amp; Extra(std::ostream &amp;)</div><div class="ttdef"><b>Definition</b> <a href="src_2debug_2debug_8cc_source.html#l01316">debug.cc:1316</a></div></div>
<div class="ttc" id="aclassMemBuf_html"><div class="ttname"><a href="classMemBuf.html">MemBuf</a></div><div class="ttdef"><b>Definition</b> <a href="MemBuf_8h_source.html#l00023">MemBuf.h:24</a></div></div>
<div class="ttc" id="aclassMemBuf_html_a7a189b679e374a2cca1d01f9ba4e195f"><div class="ttname"><a href="classMemBuf.html#a7a189b679e374a2cca1d01f9ba4e195f">MemBuf::content</a></div><div class="ttdeci">char * content()</div><div class="ttdoc">start of the added data</div><div class="ttdef"><b>Definition</b> <a href="MemBuf_8h_source.html#l00041">MemBuf.h:41</a></div></div>
<div class="ttc" id="aclassMemBuf_html_aaaf0cc30487417b07680613bcf518dca"><div class="ttname"><a href="classMemBuf.html#aaaf0cc30487417b07680613bcf518dca">MemBuf::contentSize</a></div><div class="ttdeci">mb_size_t contentSize() const</div><div class="ttdoc">available data size</div><div class="ttdef"><b>Definition</b> <a href="MemBuf_8h_source.html#l00047">MemBuf.h:47</a></div></div>
<div class="ttc" id="aclassMemObject_html_a66e95211cec7250b591bd1eaf9fe4f08"><div class="ttname"><a href="classMemObject.html#a66e95211cec7250b591bd1eaf9fe4f08">MemObject::vary_headers</a></div><div class="ttdeci">SBuf vary_headers</div><div class="ttdef"><b>Definition</b> <a href="MemObject_8h_source.html#l00221">MemObject.h:221</a></div></div>
<div class="ttc" id="aclassMemObject_html_abf57cb8cfe4db5b2d6ee8c4e943e0fd3"><div class="ttname"><a href="classMemObject.html#abf57cb8cfe4db5b2d6ee8c4e943e0fd3">MemObject::swap_hdr_sz</a></div><div class="ttdeci">size_t swap_hdr_sz</div><div class="ttdef"><b>Definition</b> <a href="MemObject_8h_source.html#l00216">MemObject.h:216</a></div></div>
<div class="ttc" id="aclassSBuf_html"><div class="ttname"><a href="classSBuf.html">SBuf</a></div><div class="ttdef"><b>Definition</b> <a href="SBuf_8h_source.html#l00093">SBuf.h:94</a></div></div>
<div class="ttc" id="aclassSBuf_html_a1af20d84cdd1e4f380c74a08d67d0edb"><div class="ttname"><a href="classSBuf.html#a1af20d84cdd1e4f380c74a08d67d0edb">SBuf::rawContent</a></div><div class="ttdeci">const char * rawContent() const</div><div class="ttdef"><b>Definition</b> <a href="SBuf_8cc_source.html#l00509">SBuf.cc:509</a></div></div>
<div class="ttc" id="aclassSBuf_html_a4fdfe954309aa6da19240f11a8f6b583"><div class="ttname"><a href="classSBuf.html#a4fdfe954309aa6da19240f11a8f6b583">SBuf::length</a></div><div class="ttdeci">size_type length() const</div><div class="ttdoc">Returns the number of bytes stored in SBuf.</div><div class="ttdef"><b>Definition</b> <a href="SBuf_8h_source.html#l00419">SBuf.h:419</a></div></div>
<div class="ttc" id="aclassSBuf_html_a6f56e99bef653fef295096b7fc04be99"><div class="ttname"><a href="classSBuf.html#a6f56e99bef653fef295096b7fc04be99">SBuf::trim</a></div><div class="ttdeci">SBuf &amp; trim(const SBuf &amp;toRemove, bool atBeginning=true, bool atEnd=true)</div><div class="ttdef"><b>Definition</b> <a href="SBuf_8cc_source.html#l00551">SBuf.cc:551</a></div></div>
<div class="ttc" id="aclassSBuf_html_a8bda8fe69e451e61946b35c2a2d2340b"><div class="ttname"><a href="classSBuf.html#a8bda8fe69e451e61946b35c2a2d2340b">SBuf::isEmpty</a></div><div class="ttdeci">bool isEmpty() const</div><div class="ttdef"><b>Definition</b> <a href="SBuf_8h_source.html#l00435">SBuf.h:435</a></div></div>
<div class="ttc" id="aclassStoreEntry_html"><div class="ttname"><a href="classStoreEntry.html">StoreEntry</a></div><div class="ttdef"><b>Definition</b> <a href="Store_8h_source.html#l00037">Store.h:38</a></div></div>
<div class="ttc" id="aclassStoreEntry_html_a15b61bc1167a3670130a81bc5eca9f16"><div class="ttname"><a href="classStoreEntry.html#a15b61bc1167a3670130a81bc5eca9f16">StoreEntry::flags</a></div><div class="ttdeci">uint16_t flags</div><div class="ttdef"><b>Definition</b> <a href="Store_8h_source.html#l00231">Store.h:231</a></div></div>
<div class="ttc" id="aclassStoreEntry_html_a19fd5af89e99c467c29f7bd951ac901d"><div class="ttname"><a href="classStoreEntry.html#a19fd5af89e99c467c29f7bd951ac901d">StoreEntry::mem</a></div><div class="ttdeci">MemObject &amp; mem()</div><div class="ttdef"><b>Definition</b> <a href="Store_8h_source.html#l00047">Store.h:47</a></div></div>
<div class="ttc" id="aclassStoreEntry_html_a42dc938e1e2a49b3d4275eabeb8eb699"><div class="ttname"><a href="classStoreEntry.html#a42dc938e1e2a49b3d4275eabeb8eb699">StoreEntry::expires</a></div><div class="ttdeci">time_t expires</div><div class="ttdef"><b>Definition</b> <a href="Store_8h_source.html#l00225">Store.h:225</a></div></div>
<div class="ttc" id="aclassStoreEntry_html_a4550da0757f7c3aa6af8e8e9c3bcdb48"><div class="ttname"><a href="classStoreEntry.html#a4550da0757f7c3aa6af8e8e9c3bcdb48">StoreEntry::lastModified</a></div><div class="ttdeci">void lastModified(const time_t when)</div><div class="ttdef"><b>Definition</b> <a href="Store_8h_source.html#l00175">Store.h:175</a></div></div>
<div class="ttc" id="aclassStoreEntry_html_a5880b874fdaa8aa76b21a5fedd609ca0"><div class="ttname"><a href="classStoreEntry.html#a5880b874fdaa8aa76b21a5fedd609ca0">StoreEntry::timestamp</a></div><div class="ttdeci">time_t timestamp</div><div class="ttdef"><b>Definition</b> <a href="Store_8h_source.html#l00223">Store.h:223</a></div></div>
<div class="ttc" id="aclassStoreEntry_html_a88e8fcd41e9d2d0c24ea68daa9a4eb57"><div class="ttname"><a href="classStoreEntry.html#a88e8fcd41e9d2d0c24ea68daa9a4eb57">StoreEntry::getMD5Text</a></div><div class="ttdeci">const char * getMD5Text() const</div><div class="ttdef"><b>Definition</b> <a href="store_8cc_source.html#l00207">store.cc:207</a></div></div>
<div class="ttc" id="aclassStoreEntry_html_ade76832635a65f3a2e0fc70347b533c8"><div class="ttname"><a href="classStoreEntry.html#ade76832635a65f3a2e0fc70347b533c8">StoreEntry::lastref</a></div><div class="ttdeci">time_t lastref</div><div class="ttdef"><b>Definition</b> <a href="Store_8h_source.html#l00224">Store.h:224</a></div></div>
<div class="ttc" id="aclassStoreEntry_html_af3c8d494db0f2f861a64ad4b7e6a0452"><div class="ttname"><a href="classStoreEntry.html#af3c8d494db0f2f861a64ad4b7e6a0452">StoreEntry::swap_file_sz</a></div><div class="ttdeci">uint64_t swap_file_sz</div><div class="ttdef"><b>Definition</b> <a href="Store_8h_source.html#l00229">Store.h:229</a></div></div>
<div class="ttc" id="aclassStoreEntry_html_af3f6238d5f1ab68dc63d6f70d41e5e4b"><div class="ttname"><a href="classStoreEntry.html#af3f6238d5f1ab68dc63d6f70d41e5e4b">StoreEntry::refcount</a></div><div class="ttdeci">uint16_t refcount</div><div class="ttdef"><b>Definition</b> <a href="Store_8h_source.html#l00230">Store.h:230</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaIterator_html"><div class="ttname"><a href="classStore_1_1SwapMetaIterator.html">Store::SwapMetaIterator</a></div><div class="ttdoc">iterates serialized swap meta fields loaded into a given buffer</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00026">SwapMetaIn.cc:27</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaIterator_html_a020410569215f4b88005f617c694f525"><div class="ttname"><a href="classStore_1_1SwapMetaIterator.html#a020410569215f4b88005f617c694f525">Store::SwapMetaIterator::operator*</a></div><div class="ttdeci">reference operator*() const</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00039">SwapMetaIn.cc:39</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaIterator_html_a048105e11001608e0ed1bc5182e2495b"><div class="ttname"><a href="classStore_1_1SwapMetaIterator.html#a048105e11001608e0ed1bc5182e2495b">Store::SwapMetaIterator::meta_</a></div><div class="ttdeci">SwapMetaView meta_</div><div class="ttdoc">current field; valid after sync() and before end</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00050">SwapMetaIn.cc:50</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaIterator_html_a0b386bdaad8d3a9f6e2d6878aa0373e8"><div class="ttname"><a href="classStore_1_1SwapMetaIterator.html#a0b386bdaad8d3a9f6e2d6878aa0373e8">Store::SwapMetaIterator::fieldStart_</a></div><div class="ttdeci">const char * fieldStart_</div><div class="ttdoc">the start of the current field</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00048">SwapMetaIn.cc:48</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaIterator_html_a4c06b65c3e5a41d59aa63ed72c3b45ce"><div class="ttname"><a href="classStore_1_1SwapMetaIterator.html#a4c06b65c3e5a41d59aa63ed72c3b45ce">Store::SwapMetaIterator::sync</a></div><div class="ttdeci">void sync()</div><div class="ttdoc">(re)set meta_</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00197">SwapMetaIn.cc:197</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaIterator_html_a74e6380f97439287f868afb47547fdc1"><div class="ttname"><a href="classStore_1_1SwapMetaIterator.html#a74e6380f97439287f868afb47547fdc1">Store::SwapMetaIterator::bufEnd_</a></div><div class="ttdeci">const void *const bufEnd_</div><div class="ttdoc">last field must end at this boundary</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00049">SwapMetaIn.cc:49</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaIterator_html_a76b1654353c86cf5653189862379644e"><div class="ttname"><a href="classStore_1_1SwapMetaIterator.html#a76b1654353c86cf5653189862379644e">Store::SwapMetaIterator::operator==</a></div><div class="ttdeci">bool operator==(const SwapMetaIterator &amp;them) const</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00042">SwapMetaIn.cc:42</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaIterator_html_a9c137bf2db9cad4ec5b23fcc49952f47"><div class="ttname"><a href="classStore_1_1SwapMetaIterator.html#a9c137bf2db9cad4ec5b23fcc49952f47">Store::SwapMetaIterator::operator++</a></div><div class="ttdeci">SwapMetaIterator &amp; operator++()</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00184">SwapMetaIn.cc:184</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaIterator_html_abf4ae07b30a6e2630cb1211f7d352926"><div class="ttname"><a href="classStore_1_1SwapMetaIterator.html#abf4ae07b30a6e2630cb1211f7d352926">Store::SwapMetaIterator::SwapMetaIterator</a></div><div class="ttdeci">SwapMetaIterator(const void *start, const void *end)</div><div class="ttdoc">positions iterator at the start of a swap meta field extending up to end</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00176">SwapMetaIn.cc:176</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaIterator_html_ac7cb6ba9e623ce1ac23261737854d041"><div class="ttname"><a href="classStore_1_1SwapMetaIterator.html#ac7cb6ba9e623ce1ac23261737854d041">Store::SwapMetaIterator::iterator_category</a></div><div class="ttdeci">std::forward_iterator_tag iterator_category</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00030">SwapMetaIn.cc:30</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaIterator_html_ac88d14a69ea6937ab4227ed81fdfd7f1"><div class="ttname"><a href="classStore_1_1SwapMetaIterator.html#ac88d14a69ea6937ab4227ed81fdfd7f1">Store::SwapMetaIterator::operator!=</a></div><div class="ttdeci">bool operator!=(const SwapMetaIterator &amp;them) const</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00043">SwapMetaIn.cc:43</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaIterator_html_af2aae96d26435410fd77f74c163a9a51"><div class="ttname"><a href="classStore_1_1SwapMetaIterator.html#af2aae96d26435410fd77f74c163a9a51">Store::SwapMetaIterator::operator-&gt;</a></div><div class="ttdeci">pointer operator-&gt;() const</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00040">SwapMetaIn.cc:40</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaUnpacker_html"><div class="ttname"><a href="classStore_1_1SwapMetaUnpacker.html">Store::SwapMetaUnpacker</a></div><div class="ttdoc">Store entry metadata view providing a for-range loop meta field iterator API.</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00054">SwapMetaIn.cc:55</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaUnpacker_html_a0e229335ef6b35cd1f72317286eb50db"><div class="ttname"><a href="classStore_1_1SwapMetaUnpacker.html#a0e229335ef6b35cd1f72317286eb50db">Store::SwapMetaUnpacker::begin</a></div><div class="ttdeci">Iterator begin() const</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00063">SwapMetaIn.cc:63</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaUnpacker_html_a1273e9df75df59da9abcd0b36f30ce04"><div class="ttname"><a href="classStore_1_1SwapMetaUnpacker.html#a1273e9df75df59da9abcd0b36f30ce04">Store::SwapMetaUnpacker::Iterator</a></div><div class="ttdeci">SwapMetaIterator Iterator</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00060">SwapMetaIn.cc:60</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaUnpacker_html_a2afb19f331d90c1903cf7d90dd309334"><div class="ttname"><a href="classStore_1_1SwapMetaUnpacker.html#a2afb19f331d90c1903cf7d90dd309334">Store::SwapMetaUnpacker::SwapMetaUnpacker</a></div><div class="ttdeci">SwapMetaUnpacker(const char *buf, ssize_t bufferLength, size_t &amp;swap_hdr_sz)</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00211">SwapMetaIn.cc:211</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaUnpacker_html_a4424d324db32449c22a892169c962130"><div class="ttname"><a href="classStore_1_1SwapMetaUnpacker.html#a4424d324db32449c22a892169c962130">Store::SwapMetaUnpacker::cbegin</a></div><div class="ttdeci">Iterator cbegin() const</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00061">SwapMetaIn.cc:61</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaUnpacker_html_a80122da53dec7fbe7eb3dae312fcefd7"><div class="ttname"><a href="classStore_1_1SwapMetaUnpacker.html#a80122da53dec7fbe7eb3dae312fcefd7">Store::SwapMetaUnpacker::metasSize</a></div><div class="ttdeci">size_t metasSize</div><div class="ttdoc">number of bytes in the metas buffer</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00068">SwapMetaIn.cc:68</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaUnpacker_html_a9fda8df59b9d0f3e336b89ecb2df9a33"><div class="ttname"><a href="classStore_1_1SwapMetaUnpacker.html#a9fda8df59b9d0f3e336b89ecb2df9a33">Store::SwapMetaUnpacker::cend</a></div><div class="ttdeci">Iterator cend() const</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00062">SwapMetaIn.cc:62</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaUnpacker_html_aa16f6d564547c3a71cbbf38d3e110ef2"><div class="ttname"><a href="classStore_1_1SwapMetaUnpacker.html#aa16f6d564547c3a71cbbf38d3e110ef2">Store::SwapMetaUnpacker::end</a></div><div class="ttdeci">Iterator end() const</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00064">SwapMetaIn.cc:64</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaUnpacker_html_afa65ad9861a8e2b55500604157a2b2bb"><div class="ttname"><a href="classStore_1_1SwapMetaUnpacker.html#afa65ad9861a8e2b55500604157a2b2bb">Store::SwapMetaUnpacker::metas</a></div><div class="ttdeci">const char * metas</div><div class="ttdoc">metadata field(s)</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00067">SwapMetaIn.cc:67</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaView_html"><div class="ttname"><a href="classStore_1_1SwapMetaView.html">Store::SwapMetaView</a></div><div class="ttdoc">a swap metadata field inside the buffer given to SwapMetaUnpacker</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaView_8h_source.html#l00020">SwapMetaView.h:21</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaView_html_a11af5126af0ba39c1c8a072184990b26"><div class="ttname"><a href="classStore_1_1SwapMetaView.html#a11af5126af0ba39c1c8a072184990b26">Store::SwapMetaView::checkExpectedLength</a></div><div class="ttdeci">void checkExpectedLength(size_t) const</div><div class="ttdoc">ensures that our fixed-size field value has the given expected length</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaView_8cc_source.html#l00083">SwapMetaView.cc:83</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaView_html_a1a53b5736e7d1b05f71512ed0126008e"><div class="ttname"><a href="classStore_1_1SwapMetaView.html#a1a53b5736e7d1b05f71512ed0126008e">Store::SwapMetaView::rawLength</a></div><div class="ttdeci">size_t rawLength</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaView_8h_source.html#l00035">SwapMetaView.h:35</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaView_html_a1f0739c493cf4d2c7d6d61cdea2b86c8"><div class="ttname"><a href="classStore_1_1SwapMetaView.html#a1f0739c493cf4d2c7d6d61cdea2b86c8">Store::SwapMetaView::type</a></div><div class="ttdeci">SwapMetaType type</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaView_8h_source.html#l00043">SwapMetaView.h:43</a></div></div>
<div class="ttc" id="aclassStore_1_1SwapMetaView_html_a8ac41d45f6c678d25fc7ab6b599727fa"><div class="ttname"><a href="classStore_1_1SwapMetaView.html#a8ac41d45f6c678d25fc7ab6b599727fa">Store::SwapMetaView::rawValue</a></div><div class="ttdeci">const void * rawValue</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaView_8h_source.html#l00030">SwapMetaView.h:30</a></div></div>
<div class="ttc" id="aclassTextException_html"><div class="ttname"><a href="classTextException.html">TextException</a></div><div class="ttdoc">an std::runtime_error with thrower location info</div><div class="ttdef"><b>Definition</b> <a href="TextException_8h_source.html#l00020">TextException.h:21</a></div></div>
<div class="ttc" id="aclasshash__link_html_ae8c6b512f09a15a32ce953deb2e58ffb"><div class="ttname"><a href="classhash__link.html#ae8c6b512f09a15a32ce953deb2e58ffb">hash_link::key</a></div><div class="ttdeci">void * key</div><div class="ttdef"><b>Definition</b> <a href="hash_8h_source.html#l00019">hash.h:19</a></div></div>
<div class="ttc" id="adebug_2Stream_8h_html_ad1f6f001d275799243ee96d0b1519d3a"><div class="ttname"><a href="debug_2Stream_8h.html#ad1f6f001d275799243ee96d0b1519d3a">DBG_IMPORTANT</a></div><div class="ttdeci">#define DBG_IMPORTANT</div><div class="ttdef"><b>Definition</b> <a href="debug_2Stream_8h_source.html#l00038">Stream.h:38</a></div></div>
<div class="ttc" id="adebug_2Stream_8h_html_ad8cd33a7d75c0efd4d3fd369dc6a8f13"><div class="ttname"><a href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a></div><div class="ttdeci">#define debugs(SECTION, LEVEL, CONTENT)</div><div class="ttdef"><b>Definition</b> <a href="debug_2Stream_8h_source.html#l00192">Stream.h:192</a></div></div>
<div class="ttc" id="adefines_8h_html_ac1f8e975d5c9f901f8ec9f29db1aca92"><div class="ttname"><a href="defines_8h.html#ac1f8e975d5c9f901f8ec9f29db1aca92">EBIT_TEST</a></div><div class="ttdeci">#define EBIT_TEST(flag, bit)</div><div class="ttdef"><b>Definition</b> <a href="defines_8h_source.html#l00067">defines.h:67</a></div></div>
<div class="ttc" id="aenums_8h_html_a16685eea158879e41b101ca3634de462a6e99a1b0a211e1f4d482be594fe0e19f"><div class="ttname"><a href="enums_8h.html#a16685eea158879e41b101ca3634de462a6e99a1b0a211e1f4d482be594fe0e19f">KEY_PRIVATE</a></div><div class="ttdeci">@ KEY_PRIVATE</div><div class="ttdef"><b>Definition</b> <a href="enums_8h_source.html#l00097">enums.h:97</a></div></div>
<div class="ttc" id="aint_8cc_html_a447b20e752a00e512f1ead308f55db38"><div class="ttname"><a href="int_8cc.html#a447b20e752a00e512f1ead308f55db38">isPowTen</a></div><div class="ttdeci">int isPowTen(int count)</div><div class="ttdef"><b>Definition</b> <a href="int_8cc_source.html#l00017">int.cc:17</a></div></div>
<div class="ttc" id="aint_8h_html"><div class="ttname"><a href="int_8h.html">int.h</a></div></div>
<div class="ttc" id="amd5_8h_html"><div class="ttname"><a href="md5_8h.html">md5.h</a></div></div>
<div class="ttc" id="amd5_8h_html_a798438dc0194720c48b82a27ca9af05a"><div class="ttname"><a href="md5_8h.html#a798438dc0194720c48b82a27ca9af05a">SQUID_MD5_DIGEST_LENGTH</a></div><div class="ttdeci">#define SQUID_MD5_DIGEST_LENGTH</div><div class="ttdef"><b>Definition</b> <a href="md5_8h_source.html#l00066">md5.h:66</a></div></div>
<div class="ttc" id="amemrchr_8cc_html_a256d9438f9a762d8b0052eb57a85b0cf"><div class="ttname"><a href="memrchr_8cc.html#a256d9438f9a762d8b0052eb57a85b0cf">memrchr</a></div><div class="ttdeci">void * memrchr(const void *s, int c, size_t n)</div><div class="ttdef"><b>Definition</b> <a href="memrchr_8cc_source.html#l00036">memrchr.cc:36</a></div></div>
<div class="ttc" id="anamespaceStore_html"><div class="ttname"><a href="namespaceStore.html">Store</a></div><div class="ttdef"><b>Definition</b> <a href="SquidConfig_8h_source.html#l00062">SquidConfig.h:62</a></div></div>
<div class="ttc" id="anamespaceStore_html_a0f118a9d749fa2baef3a054dbbdfd321"><div class="ttname"><a href="namespaceStore.html#a0f118a9d749fa2baef3a054dbbdfd321">Store::SwapMetaPrefixSize</a></div><div class="ttdeci">const auto SwapMetaPrefixSize</div><div class="ttdoc">The size of the initial (and required) portion of any swap metadata.</div><div class="ttdef"><b>Definition</b> <a href="SwapMeta_8h_source.html#l00122">SwapMeta.h:122</a></div></div>
<div class="ttc" id="anamespaceStore_html_a1fd2c6e1b5fa5b8c47c9adac4b561dbe"><div class="ttname"><a href="namespaceStore.html#a1fd2c6e1b5fa5b8c47c9adac4b561dbe">Store::SwapMetaExtract</a></div><div class="ttdeci">void SwapMetaExtract(Item &amp;item, const char *&amp;input, const void *end)</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaView_8h_source.html#l00068">SwapMetaView.h:68</a></div></div>
<div class="ttc" id="anamespaceStore_html_a314d45544a069dc910040e4619a424cc"><div class="ttname"><a href="namespaceStore.html#a314d45544a069dc910040e4619a424cc">Store::UnpackSwapMetaKey</a></div><div class="ttdeci">static void UnpackSwapMetaKey(const SwapMetaView &amp;meta, cache_key *key)</div><div class="ttdoc">deserializes STORE_META_KEY_MD5 swap meta field</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00095">SwapMetaIn.cc:95</a></div></div>
<div class="ttc" id="anamespaceStore_html_a339f6ed2fcc2dc68136898c171c34558"><div class="ttname"><a href="namespaceStore.html#a339f6ed2fcc2dc68136898c171c34558">Store::RawSwapMetaLength</a></div><div class="ttdeci">int RawSwapMetaLength</div><div class="ttdef"><b>Definition</b> <a href="SwapMeta_8h_source.html#l00100">SwapMeta.h:100</a></div></div>
<div class="ttc" id="anamespaceStore_html_a34f71f7cce9cdd696b0760c38395a0e1"><div class="ttname"><a href="namespaceStore.html#a34f71f7cce9cdd696b0760c38395a0e1">Store::RawSwapMetaType</a></div><div class="ttdeci">char RawSwapMetaType</div><div class="ttdef"><b>Definition</b> <a href="SwapMeta_8h_source.html#l00095">SwapMeta.h:95</a></div></div>
<div class="ttc" id="anamespaceStore_html_a3b2cb71614ece155c8c83d5bf34aea94"><div class="ttname"><a href="namespaceStore.html#a3b2cb71614ece155c8c83d5bf34aea94">Store::UnpackSwapMetaSize</a></div><div class="ttdeci">size_t UnpackSwapMetaSize(const SBuf &amp;)</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00237">SwapMetaIn.cc:237</a></div></div>
<div class="ttc" id="anamespaceStore_html_a3d87686582d884e61bf470762f516cf1"><div class="ttname"><a href="namespaceStore.html#a3d87686582d884e61bf470762f516cf1">Store::UnpackHitSwapMeta</a></div><div class="ttdeci">void UnpackHitSwapMeta(char const *, ssize_t, StoreEntry &amp;)</div><div class="ttdoc">deserializes entry metadata from the given buffer into the cache hit entry</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00310">SwapMetaIn.cc:310</a></div></div>
<div class="ttc" id="anamespaceStore_html_a426ca6018ae7cfd360949012febb3e00"><div class="ttname"><a href="namespaceStore.html#a426ca6018ae7cfd360949012febb3e00">Store::UnpackIndexSwapMeta</a></div><div class="ttdeci">size_t UnpackIndexSwapMeta(const MemBuf &amp;, StoreEntry &amp;, cache_key *)</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00243">SwapMetaIn.cc:243</a></div></div>
<div class="ttc" id="anamespaceStore_html_ab6530078363b87e39dbb0c145b48a347a34961af3f7efadb258692204695b242b"><div class="ttname"><a href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a34961af3f7efadb258692204695b242b">Store::STORE_META_URL</a></div><div class="ttdeci">@ STORE_META_URL</div><div class="ttdef"><b>Definition</b> <a href="SwapMeta_8h_source.html#l00065">SwapMeta.h:65</a></div></div>
<div class="ttc" id="anamespaceStore_html_ab6530078363b87e39dbb0c145b48a347a44fa5b00bdf95e6fa7af4bad03e3d0c8"><div class="ttname"><a href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a44fa5b00bdf95e6fa7af4bad03e3d0c8">Store::STORE_META_VARY_HEADERS</a></div><div class="ttdeci">@ STORE_META_VARY_HEADERS</div><div class="ttdoc">Stores Vary request headers.</div><div class="ttdef"><b>Definition</b> <a href="SwapMeta_8h_source.html#l00083">SwapMeta.h:83</a></div></div>
<div class="ttc" id="anamespaceStore_html_ab6530078363b87e39dbb0c145b48a347a5fbdbb52de736b957dbbd0b154f0b017"><div class="ttname"><a href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a5fbdbb52de736b957dbbd0b154f0b017">Store::STORE_META_OBJSIZE</a></div><div class="ttdeci">@ STORE_META_OBJSIZE</div><div class="ttdef"><b>Definition</b> <a href="SwapMeta_8h_source.html#l00091">SwapMeta.h:90</a></div></div>
<div class="ttc" id="anamespaceStore_html_ab6530078363b87e39dbb0c145b48a347a947710a924fe192550953bdd1f478a0b"><div class="ttname"><a href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347a947710a924fe192550953bdd1f478a0b">Store::STORE_META_KEY_MD5</a></div><div class="ttdeci">@ STORE_META_KEY_MD5</div><div class="ttdef"><b>Definition</b> <a href="SwapMeta_8h_source.html#l00061">SwapMeta.h:61</a></div></div>
<div class="ttc" id="anamespaceStore_html_ab6530078363b87e39dbb0c145b48a347aca1ab5eee80a1896bfcf484671be64b6"><div class="ttname"><a href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347aca1ab5eee80a1896bfcf484671be64b6">Store::STORE_META_STD</a></div><div class="ttdeci">@ STORE_META_STD</div><div class="ttdef"><b>Definition</b> <a href="SwapMeta_8h_source.html#l00080">SwapMeta.h:80</a></div></div>
<div class="ttc" id="anamespaceStore_html_ab6530078363b87e39dbb0c145b48a347accc6e241d611350cdc112d6c4a1a0b31"><div class="ttname"><a href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347accc6e241d611350cdc112d6c4a1a0b31">Store::STORE_META_STD_LFS</a></div><div class="ttdeci">@ STORE_META_STD_LFS</div><div class="ttdef"><b>Definition</b> <a href="SwapMeta_8h_source.html#l00087">SwapMeta.h:87</a></div></div>
<div class="ttc" id="anamespaceStore_html_ab6530078363b87e39dbb0c145b48a347afe8989f73b872204e64e7390ab8d4837"><div class="ttname"><a href="namespaceStore.html#ab6530078363b87e39dbb0c145b48a347afe8989f73b872204e64e7390ab8d4837">Store::STORE_META_VOID</a></div><div class="ttdeci">@ STORE_META_VOID</div><div class="ttdef"><b>Definition</b> <a href="SwapMeta_8h_source.html#l00055">SwapMeta.h:55</a></div></div>
<div class="ttc" id="anamespaceStore_html_ab8809ac7d8cd83493682c04de6613641"><div class="ttname"><a href="namespaceStore.html#ab8809ac7d8cd83493682c04de6613641">Store::CheckSwapMetaKey</a></div><div class="ttdeci">static void CheckSwapMetaKey(const SwapMetaView &amp;meta, const StoreEntry &amp;entry)</div><div class="ttdoc">validates serialized STORE_META_KEY_MD5 swap meta field</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00073">SwapMetaIn.cc:73</a></div></div>
<div class="ttc" id="anamespaceStore_html_ac79e6fc2ad4dd43b112eca047d40e47c"><div class="ttname"><a href="namespaceStore.html#ac79e6fc2ad4dd43b112eca047d40e47c">Store::UnpackNewSwapMetaVaryHeaders</a></div><div class="ttdeci">static SBuf UnpackNewSwapMetaVaryHeaders(const SwapMetaView &amp;meta, const StoreEntry &amp;entry)</div><div class="ttdoc">deserializes STORE_META_VARY_HEADERS swap meta field</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00130">SwapMetaIn.cc:130</a></div></div>
<div class="ttc" id="anamespaceStore_html_acc47c7124b06c47960aff04bc1fdeae4"><div class="ttname"><a href="namespaceStore.html#acc47c7124b06c47960aff04bc1fdeae4">Store::SwapMetaMagic</a></div><div class="ttdeci">const char SwapMetaMagic</div><div class="ttdoc">the start of the swap meta section</div><div class="ttdef"><b>Definition</b> <a href="SwapMeta_8h_source.html#l00113">SwapMeta.h:113</a></div></div>
<div class="ttc" id="anamespaceStore_html_acfd21bd40bfd87d8c4edba8804b5cbb9"><div class="ttname"><a href="namespaceStore.html#acfd21bd40bfd87d8c4edba8804b5cbb9">Store::STORE_HDR_METASIZE_OLD</a></div><div class="ttdeci">const auto STORE_HDR_METASIZE_OLD</div><div class="ttdef"><b>Definition</b> <a href="SwapMeta_8h_source.html#l00231">SwapMeta.h:231</a></div></div>
<div class="ttc" id="anamespaceStore_html_ad5a1edbed1904633b906d85eed526acd"><div class="ttname"><a href="namespaceStore.html#ad5a1edbed1904633b906d85eed526acd">Store::UnpackPrefix</a></div><div class="ttdeci">static size_t UnpackPrefix(const char *const buf, const size_t size)</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00151">SwapMetaIn.cc:151</a></div></div>
<div class="ttc" id="anamespaceStore_html_adee9396b3f2162b09018517703f86eb9"><div class="ttname"><a href="namespaceStore.html#adee9396b3f2162b09018517703f86eb9">Store::STORE_HDR_METASIZE</a></div><div class="ttdeci">const auto STORE_HDR_METASIZE</div><div class="ttdef"><b>Definition</b> <a href="SwapMeta_8h_source.html#l00226">SwapMeta.h:226</a></div></div>
<div class="ttc" id="anamespaceStore_html_ae3be008f24b1fb00060c2887cf6d5156"><div class="ttname"><a href="namespaceStore.html#ae3be008f24b1fb00060c2887cf6d5156">Store::CheckSwapMetaUrl</a></div><div class="ttdeci">static void CheckSwapMetaUrl(const SwapMetaView &amp;meta, const StoreEntry &amp;entry)</div><div class="ttdoc">validates serialized STORE_META_URL swap meta field</div><div class="ttdef"><b>Definition</b> <a href="SwapMetaIn_8cc_source.html#l00105">SwapMetaIn.cc:105</a></div></div>
<div class="ttc" id="anamespaceStore_html_af47e8491b1f49e1aefc488dbf042bea1"><div class="ttname"><a href="namespaceStore.html#af47e8491b1f49e1aefc488dbf042bea1">Store::RawSwapMetaPrefixLength</a></div><div class="ttdeci">int RawSwapMetaPrefixLength</div><div class="ttdef"><b>Definition</b> <a href="SwapMeta_8h_source.html#l00119">SwapMeta.h:119</a></div></div>
<div class="ttc" id="asbuf_2Stream_8h_html"><div class="ttname"><a href="sbuf_2Stream_8h.html">Stream.h</a></div></div>
<div class="ttc" id="asbuf_2Stream_8h_html_a6160c2bd5c3883a54866ccfd670ce4b6"><div class="ttname"><a href="sbuf_2Stream_8h.html#a6160c2bd5c3883a54866ccfd670ce4b6">ToSBuf</a></div><div class="ttdeci">SBuf ToSBuf(Args &amp;&amp;... args)</div><div class="ttdoc">slowly stream-prints all arguments into a freshly allocated SBuf</div><div class="ttdef"><b>Definition</b> <a href="sbuf_2Stream_8h_source.html#l00063">Stream.h:63</a></div></div>
<div class="ttc" id="asquid_8h_html"><div class="ttname"><a href="squid_8h.html">squid.h</a></div></div>
<div class="ttc" id="astore_2forward_8h_html_ab1424e1b13666cc28f4c5cb05f8c8305"><div class="ttname"><a href="store_2forward_8h.html#ab1424e1b13666cc28f4c5cb05f8c8305">cache_key</a></div><div class="ttdeci">unsigned char cache_key</div><div class="ttdoc">Store key.</div><div class="ttdef"><b>Definition</b> <a href="store_2forward_8h_source.html#l00029">forward.h:29</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_3c69fff7f634b97773a4d39d4565ffb4.html">squid</a></li><li class="navelem"><a class="el" href="dir_27a06220d184fcc3bd2c56b7794ae45b.html">src</a></li><li class="navelem"><a class="el" href="dir_1229afb8e52dfc1c3c62a62edc39069e.html">store</a></li><li class="navelem"><a class="el" href="SwapMetaIn_8cc.html">SwapMetaIn.cc</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
